var Efferent;(function(e){var t;(function(e){var t;(function(e){class ResourceBag{}ResourceBag.CommonViewCss=`.actionButtonsContainer{display:inline-block;margin-bottom:10px}.actionButtonsContainer>button.referenceButton+button.referenceButton{margin-left:8px}.resourceListBox{display:flex;flex-direction:column;overflow-y:auto}.resourceListBox.dottedBorder{border-width:0 0 1px 1px}.listRow{cursor:pointer;display:flex}.listRowActive{background-color:#fff;color:#34495e}.listRowCell{width:100%;overflow:hidden;text-overflow:ellipsis;padding:3px;white-space:nowrap}.listRowCell.dottedBorder{border-width:1px 1px 0 0 !important}.listRowTitleCell{font-weight:bold;color:#fff;background-color:var(--color-background-secondary)}.resourceListBoxSearch{background-color:#3498db;padding:5px 10px;display:flex;flex-direction:column;padding:5px 10px;gap:10px}@media(min-width: 600px){.resourceListBoxSearch{flex-direction:row;padding:10px 10px;margin-bottom:10px}}.resourceListBoxSearch div.flex{display:flex;align-items:center;gap:10px}.resourceListBoxSearch div.flex span{color:#fff;white-space:nowrap;min-width:72px}.resourceListBoxSearch div.flex span.date-mask-element{color:#000;top:3px}@media(min-width: 600px){.resourceListBoxSearch div.flex span{min-width:auto}}.resourceListBoxSearch div.flex span.capitalize{text-transform:capitalize}@media(min-width: 600px){.resourceListBoxSearch div.flex span.capitalize{text-transform:lowercase}}.resourceListBoxSearch input{background-color:#fff;color:#2c3e50}.resourceListBoxSearch select{background-color:#fff;color:#2c3e50}.breadCrumbContainer{width:100%;align-items:center;padding:5px 0px;font-size:12px;display:none}.breadCrumbContainer+p{margin:10px 0px;padding:0px 10px;font-size:.8em}@media(min-width: 600px){.breadCrumbContainer+p{font-size:1em}}.resourceListBoxNavigation{display:flex;overflow:auto;gap:10px;margin-top:1em;margin-bottom:1em;align-items:center}.resourceListBoxNavigation p{padding:0;margin:0;font-size:.8em}@media(min-width: 600px){.resourceListBoxNavigation p{font-size:1em}}`;ResourceBag.Icons8Back32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACCSURBVFhH7ZUxCoAwFEPrIIJXEMHN23hTV10VPYdOXqM1hf/Byc3gkAehNssLLg3iC2KMLTLYlUtKqYP8REareDzkK75rqzlILrnVHCTHuUhOA+IKOZCdLs9AWkA+IRfSW80F4vwXZo3QCEcjHI1wNML524jNKj54wEoMaOwqXgjhBju8anLOJF14AAAAAElFTkSuQmCC";ResourceBag.Icons8CheckedCheckbox32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACTwAAAk8B95E4kAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHsSURBVFiF7ZfNS1RRGMZ/z2TiRoQIMjdCKdWiRcsUA6FAo1bujDZT4Er7A/oHWgTt+kAQ3EgbFyq1aZfuXCtCRLTxg6ipCRKEmafFHOkS987cmXudwHyW533PfX73nPOeD/jfpbhG21eAYeBMUk4TMvANWJO0VRfAdicwC9wHysDH8IEsEjAAdAPzwJSkg3hUe972ru07tgsZjaPfLdi+a3vP9lxS0iXbVdtjeRnHeNwOHoNxwYe2S7azznk9gILt77aLh23RYe4GdiRlnfNESaoC20BPHMA/0fEFsH3N9nPbp9sOYLsfeAv0ApW2AtjuCeafgXth4SWqI2fzDuA1tYq6KWm/UZ9cAYCnwHVgWNJOmg4NpyBsHkXbpxrkFYFp4IGkjTTmqQCAy8AzYCEcVnHmo8BL4LGkxbTmqQAkbQJD1I7nd2GRRc2vAkvArKQnzZinAggQG8AI0Aes2e4L5ueAZeA9MNOseWqAAPEpQFSA1fDnK8BPYFJS3XrPDBAgdoFbQAlYBy4AE5LKrZg3DRAgvgA3gDfAuKQPrZpDi/uApF/ARBbjQx3f07AVgB/A+aO+klEr5VJccLBNl9KK7YtJCa/acC1/EY39XQXTQBe13a1s+2tODGf58zB5FA00eprlNQpVEp5mJ/oNcdf3tFbZSk4AAAAASUVORK5CYII=";ResourceBag.Icons8ClearFilters32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIrSURBVFhH7ZY9SBxRFIVXAiFZAtu4naQyjZC09iKYai38KZIImkg0iohNEAWRLdJFSB3rhNSSTkWwskuWdCEICaKmURAR/8Z8V86OurMz+2acFQIe+Jh559137519b3cn43nextkNiVrfMpXSxDSX9npCjXdcd1X2QkzsQVHDuokaH2BLwwth9sIxDMlKXeR+C4fwVNZVMfEKrIlnslITOYeVu1tWdREwAUdQkHVtkes5nMCArGhxSGYJPoA2WYlFjgLYk4/LchML5sAOZqus2GJtG9iez8hyF59CAwvnYQcey3YWa1phH97Lii+auEOCL7ANzbJritgn9l3n+tEeRHYykeAuib7Cb2iSHSpiHsFf+GwPIPt6IlEWVkj6E/KyAyLmIfN/YMEal52OSJgj8RqUuO+pBN9+yKzBZcZZLUtXJM/DJgWqirlfXHIKr48oUoI3Gvqi8CT+qob1020Dtw38Nw1wPwh9GoaKmG4Y0bC2CHZt4CWcwqisgJh7Afae4P5XTbDzFjAehapN4JWLT8lyEwtinQG8QBPcJytuYtF3+ETBB7LOFdaACd9vAvogWXETCztgHezvuVd2ZAMm5spNJC9eFgnuQxHsvXEJWhwaKH/skQczlkjUDPayYu99PyBsC/w9hxGwJty/erVEsk6wbVmU5QsvcOC4T78JtuAeNGp4LgqEnnYrDuk2cVkk7oLIA2fF4ZTG+2WlJ5K+JvmYhqEiZsDzvIl/cIrVnrZcNl8AAAAASUVORK5CYII=";ResourceBag.Icons8Export32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEmSURBVFhH7ZYxSgNBFIanCLjRC4QlhTarl0iqkMYb5Cr24kGstLBcQ5po4zFMiqTwCoGN3yNPIeyqs5vZF5D54WeYl8z/f7Ass64oio9tIJG1wUNXR3rwhmUUwJI10Wg/6aFr3R6kCBABjg7QSP8egOwBTnVbVtsAxD+Q/856rqN9GQCc4vmPEG0DiASCjhe8wBc63skCQETHWSWEFYBIIV7x8hvCB4Dfx3gWyG/aKRB9X4AM3/LXu0NNzhOrdE5ZEtNHQNUVXWv8jLtfQxMAOi5L5SILAPLlEa5wTl2i453aBvi1XGQAIO9+jk90tC8DgJSKjm7LahvgT4UEIEo+zXu69VNgAMmKH6URoBHAI0vl7VXT9QE4cI+r7u0mlosm02gPOfcJp6WAJth8HzwAAAAASUVORK5CYII=";ResourceBag.Icons8Filter32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGuSURBVFhH7ZbPKwRxGMbX2latA4ddhaXEQW5yUeIgytXVf0AOrg4OLvIXrIOcuLgom5SEnPw4KOvGSUpykIuD2nZ8XvtYW2vtr9mJmqc+fWeeeb/v+zQ7007gT8hxnHAmk9mBQ49Y0uisCNANDhc2WFbrCTMOIKXRWWF0ctECjMuqm5ixXBDAhLkNT9Any3XRexrSMCvrW9wAew724R7isl0TPSfhHRZlFYoQEQpO4RZismsWvUbgzZ4BWcVFUQvFl3Btx7KrFn0G6fPKmmBtkP27KI7BDZyxKSK7YrG3nx7PsMVxUHZ5YlMc7uCIzWHZZYt9PfAAu+wPya5MbO7Na9Iou6So74DP8NAkuzrRYADKvo3URKlNwTk0y65NNB2Ckg8S1+wBvrAAHLfKdkc0HYWirxK+vcInYLe+Tba7ovEUpBn2o7j2CF0qr4+YYz/FCutEPnhJ2FNZ/aQAMzrNCS/hB/AD+AH8AF4GmNdpTp4FYMga2JftOmGisr0LYGLQGNh//gvMESTI6l0AE0NDDFzQT3IFx54G+BJD22ETTEnZ3ovh9u0/rNP/okDgAwJ1D/46kAa7AAAAAElFTkSuQmCC";ResourceBag.Icons8FilterAdd32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABxAAAAcQBaD85zwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAALASURBVFiFxZfLi85RGMc/x8xoTMZlhplRhGJjiCJJsTBigaWFcpuFUJOi7KT8BVhZuGVh4VIumWwoRIkkZhoiEWHcJiIxxnws3vPW8TLGe+OpX73v83yf5/vtnPOcC/xnCwBqJXAUqPtHvG+BNSGEvqyAMcAb4AjQXWbyJmAdMDaE8JYooN6MtZSZHLUlco3JDZxSn6mTykg+OXIcV0NusEo9pz5VJ5aBfFJCXjEQaJh6SX2gNpWQvEl9qJ5Xhw4GHqHeUO+qRXeFWhdrXVFr/japXu1Ur6vDiyCvjTVuqSPzTW5Q76sX1eoCyKtj7j11bL752SIT1CfqGbUqj7wq9az6WB1fEHlSbKrarR5Vh/wFvkI9qb5UpxRFnhSdqfaoh37p359xQT2svlNnlIQ8KT5P/aju+QNmb8TMKyl5QrBC7Y2j8buvV12eT80Bh/MPIrqAG0B7TmgZMDeEMC2fepX5Coh2J4RwIkfYeGBuvoUGXdXltv8uoNApGNTUWqAVWAo0Ah+Ay8DBEMLzLK7UI9ATyZcAD4GdwAvgAtAZBT1QNxfMoHapW3/jb1Ob1SWxHXdnDzK1MW5SleoW9au6rdQCGuJR/irdrNShUdDsxNeqflObSzYFIYTXwFoye8uOJFQJVAE1CfYwcBPYWuo1sAhoDyF8irer0cCoGKtVRyf3i2NAS6FdMNAO2gR0qA3Ac37usuzOaVykT4BxhQjoBHaZeczsCSH0JrH3QH0I4bU6C6iO31VgA3Ab6Ac6gPXErsnb4qH0VH2krkj8O6KvIvHVmLEFOTVOqycLEhAL1Kn71O9mrtpT4w3qs9qW4KrVfnV+4lsYfcU/hNQ5Zm7RPVFUm/pFXZ1gFsQpy/5+pR4omjwhGKJuVFfF/9vVPvWaukldqa6Nw96vHnCw90EJRE1X95t5kPSZeRUdUxenuB997cBYKo+4JgAAAABJRU5ErkJggg==";ResourceBag.Icons8FilterEdit32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAK3SURBVFhH1Za9axRRFMU3X6vGIooacWOU+BFEsBKsXIkSRLGwsfI/sIiVpRaCSsRWgkYTFQXBysRgEsQUFpJCRBYEUUTEL7BR0AhC2PV3Zk/WlexmZyY7ogd+vDfn3XfvndmZnUn9EyoUCmm4k8/nH/wlTrl0URTfAAUWhhj6k4Qak5Bz6aIwOliUem0lJmqdmdeARHH9BJ+h21bdRe4jMAvHbP0WDaRZGId30Gm7biLnAfgJJ23NF020EvAIXkG77UWLXFmYgQu2qosm2uAJwTnGFbZjixw74Sv5BhkbbC8sgtfAc5iG5bYji73bQffVbYo32Q4nNq2H1/AQltgOLQpuYp/up3vM07ajic1b4D2MkKTZdk0R3wG6j6bY12o7nkiyA3QZb5Gs0XZVEaefLwfTxLfZXpxItotkupEGGKveSCqowmqA+Wrb9REJe0g8w9hv6w/h6xGeAl36jO36isSHYJZiFcXaR+hyeDKijn6Kc4y95eCNwpjDkpMbOOrDkvAG/osGiFkHW8lT84mqqLgNsK+J9YuQZ6775THDSi+HV5wGXPwmBMXLVPGJWlBsitQA8Sp+A37AQRgOSiPmIw4LL/aFboBYFb8GehXvt9fIXP+qaqAvCIyisA240DDoz6v0qcdxBl7ABH60N6QUpgFiGpgPgc58XxCAmHfCS5gkJt5LqkYDZ138KujMe7ys9Y2g1/sELLMdXW7guA9Lwt8NuuyD8B32eEnFu+ANjBOz1HY8keQy6HG6zrDW9txlvwTfIGtbvj5M3sJ9iPxhU1Ek2gv6ZPsCfRRphh7QnX3YYYrrBn0VjbEU76uomkjYQuIToDPeDOfdwFNYxXQb4wcYrXvxclEg+BkY9RESiPkz+AR3OUyu+JwolCmWLopjXZUrTJMvLlGsXWcLpyFL4RYv1VAq9QtClla9Y9kU6AAAAABJRU5ErkJggg==";ResourceBag.Icons8First132Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEDSURBVFhH7ZExCsJQEERT2OgBxFovYG/rCTyBpZVFLmAl3sXK2k5svYlHUBJnYAMhJPmbmN3f5MGg+2V3HpiMhMiybJPn+VJGNdjZYnclY39w5IGcZVSB8j12PshOnvqDI0/kImOQUvlRnv6ji8Dg5UQrYFJONAJm5SQkYFpO2gTMy0mTgEs5qRNwKydVAddyUhZwLyeFQJRyQgGUv/D5RVJ59oMCyA15Q+SKTOQnH0SAf8E6ikQhwO9RJMoCxF2iKkBcJeoEiJtEkwBxkWgTIOYSIQFiKqERIGYSWgFiItFFgAwugWN35CSjikICOchTf3BkjoMzGdVgZ4HdqYwjDSTJD84pCaWvElYTAAAAAElFTkSuQmCC";ResourceBag.Icons8Forward32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB6SURBVFhH7Y6xCYBQDAU/NhaCO9joQNauYekwLuFCWjiCFolPSMDORvIt3sFBSHMvkTdUtRCRAZb2igXhCq5wyTmigxtHcITDEQ7CLUfccITzpxE7nO0VC8I9POForzge8clecTDOeCiMMx4KojU8ssQdxBs7ycekdAEzfUZuiLGv7AAAAABJRU5ErkJggg==";ResourceBag.Icons8ForwardArrow32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACTwAAAk8B95E4kAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHwSURBVFiF7dbPi05RGAfw504mM0Kp2VCmhpqFJjUYC4WFtfzMQooi+QMkRIkmdhZkMQsrC00pSixnZ8EsKFn50fi1kSgTxmQ+Ns+YN+Yd932NeUvvt2733HP6Pt/vOed5zrkRTTTRxP8AtOMpDjXKQIcpXEN7owycxkcMoaMMt2WWvdyJiDUR0RERj7B+luNPj4oVWJvfC3EDX3FgJu68OgW7I2JDRKyLiOURsSyHJiIiiqIYxZ6IOB8RV7EiIs4URTFRj96k6HwcxMOc7WvcxRWcwxH8NiHswxfcxKJ6xbdlmb3MROuskd+Xhh9jZS3EVlzKGRxHW83up2ItxT28R89kf9UcyOUcjIi+iNhUFMWDesUTYxExmu0/Vx8G8KqmJaseqye3sNwWYG+WUG+V8bYMuh2H89lfJQl34lPpJMQSvMOJir4WbMRFDGO84uj9hg/Z7v2Fcxbf813u0MuSGslZLsBRvEiBYVzAVqyaPPOnOYgW4xZGsauUcBJb8RbHsBnPM2v70TUD76cBdONJcleXFs9AuzGGk7nMg0pcKhUGTuV2DJXhTRfoeibM5L4VJXmV1/FltNYsnoHeZJD+GnnteOZvfkjQleL3pyunfw5sSQM75lK3sjY7I+JzRNxulIGRiBgoimJ8Lg000XD8AOveViFzsfHRAAAAAElFTkSuQmCC";ResourceBag.Icons8Last132Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAD/SURBVFhH7ZIhDsJAEEWbgACFI0gkkiPAmRD0GlwCgeAICJDgSbgCd2j5PxkBpNvOLjuD6Ut+2mk6+1+aFj1dVFW1rut6IaMa7KyQuYzpQGCHPHHYUh6pwM4Z2cqYDoqHyCFWAu9f8H4p42+kSGQVILES2QVIjISJANFKmAkQjYSpAOmSMBcgbRIuAiQk4SZAmiRcBQjKBu8S7gKEEig+UgJ5/ENghuI7csX9zVXgq3yCq+tP+FHOZ24CTeXERSBUTswF2sqJqUBXOTET0JQTEwFtOckuEFNOsgrElpNsAinlJJsADtrHlhPsnJCNjOnIFxjLqAY7U+yOZOwJUBQvBFksS7l/Z9oAAAAASUVORK5CYII=";ResourceBag.Icons8Pin48Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAEP0lEQVRogdXZW4hVVRgH8O+MOuqEymhhCZVIGSYVmWWgEFFU9NDFl8KHKAvfCnoIA1+ExEq72EsQET1FRYRZWUhpd0gsMsmy7GIXKhNrNEUzm18Pe23O8TSXfWb2njP9XzZ7Xb7//9tr7bW+9a2INgOnYz2O4H3MaremwsA0fCPDsfT8HjPbra0Q0peHDZicnvAdzmy3vgGBZUnsj5iayjobnNgzakcCZ+FP/IPLm+o68XKDE6NrJDAOW5PA1f206cQrqc1XmDHSOvsF1iZhH6NzgHadeDW1/XJUOIHL0rQ5jHMKtB+PjcmJXThtJHT2J6YbPyQxy1roNxFvpn5f4NQqdQ4k5Pkk4qUh9O3C5tR/B06uQuNAAvIlcy+mD9FGF7YkO9sxrWyd/RHnS2Yvrh2mrS68lZz4BNNqJQicGxGLIuKCiJgeEZMj4mBE7I+InRFxS0TMi4h1tVrt7hL4JkXE6xGxMCI2DNkI7kk/VRHswIThim/gnyqLnfaObbFjLSKWRsSDEZHPwT0R8VpEbI2I3RFxKCI6ImJGZKMyKyLW1Gq1oyWJPykiHouIcRGxvZWOk9R3R3gHVyenRgRYiK8T/6+YU7Rjt2znhANYUrHWZv4JWIPjScMWrQR6uKrhy99Uoda+uC/CZ4n7MO5qedRRw7pk5A9cUpHeRs6xWI6/Eu+HCoQfgxm9fyScwLnYlriOYSXGlGW8MifSSC9LUyVffi8skyMnWp0IespyAjPVd9m/8YABwu0yCB9KZL9j/jBtLZaFG/A5Li5L52DEa8twAi8mO08pcccuSr5quNMJK5KNO1vt2zEUwiZsjggRMSUiNg1x+Hek59wS9BSHLKu2N3299xpWp5acwPzU94WqtPZFOl49u/B0KntkKE5gXuq3sTrF/yV9MpF+1PjjNaxOhZ2QHfbh2eoUn0iYHxH36SPxJEvS5k4M+mPj9tR+XTWKTyRbgKOyyPDKprouPJPE9BZ1omE0b6ta/HRZLhOWN9XNkh224WcsUg8A+11iMQY/pXazqxQ/Fm8novUaQlpcg/2p7gMNWTT12KkHl/Zh9/pU/2ll4hPRo4lop+xgnQdfK2TZNnhcH/GL+urUgwUN5R3qK1nLm1gr4pckkgNSTC7L5+f5/SODzV883OwE7khlv2BiVeLPl4W3vbghlc2R5SrJblQKxUHqS2wPbsWh9H5zVeK71Q/Rq1LZYhxMZZtxSos28wAwx3NVie9Qzwy/IcvrL2+Y709g3BBt5wHgNlmapHzgvkTyLc7GpvR+SAkHe9lhvasMrX0Zvy596SNYqn6TuBvnVUJaFjA7/WTSV8/PpxvR3W59A0KWfduZBPc2PFeijLNDdZBtSvklRI6DuLHd2goB9zaJ36Vo7rHdwBXqeUeyy+Yp7dZVCDgDvyXhx9NaP2IZ52FD/Sy7T1N8/7+ALBv2rtF2pV8Q/wKYEX87XSIKUgAAAABJRU5ErkJggg==";ResourceBag.Icons8PriceTag327Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB+gAAAfoBF4pEbwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAK7SURBVFiFzZZNSFVBFMf/40ttUbRSgggi+oCggtRFFrXokVAE0qqCVrawoI2LoEW4DFu48ePZq6iMAitK6UNaBhEUkbtW4absSzCSUix9vxZ3Xozju/fd+3xZAxcuc86Z3/+cOXfmSv94mMUuANRJapNUGzNkStITSRljDMsWCd8vaUjSa0kvJP2MEbZC0gVJOUl9i4ID00AWqEgYmwEGJamkCgBNkgYl3ZDUaozJhfjVSDosaU7SbWPMpDVNS6ouhS2gyWZ+EQjtIWAN8AkYBd4Bb4FV1tYJDEtS0tLlM+9XkDkR7ickjUvaKGmTpOWSjvpOsQUkhEtSStIvBc02a59UXN4CuC17X1TZvZj1wFdgBHgDjNmemLcFRZvQyfy6pJMxMpckGWNGge2SWhRUImuMGY8T68KbgRngvDd/HHhlnwOJFlXMJgSaJQ1I6jTGnAUOAQetebekOvvssf7HgMakYkLhbuYWPgPkgDv288qPMWDQvn8DdsZY/08FChnzDdebbzjgGfFHJoaALuBhFLzH7XZgAzAVA/4ee9hEwA3wFLhWFA5UAmmgDZjzQKeBM8CEM/8ZaAX2RsAzNpl619Bo4d1e5qtDMt3l+BwpYJ8NgfdaeNo3DgDDeIdMhIAax2dHMQEW3lMQbh3agY/AZm9+JcGl89wDdNhFK4F+Fwy8xGnEonDrVAUMAR98EdZeDXz3RHxh/v4DjBTIvDsS7jingJt24a2erSNkKwqNFhtTAVwBJnF6JomIbc78/QQCukqCR4kg2KJ7wGNgHXDXAV4FthD0Sa+Nv1wSvICICYK/XgEpx97uCDhl5yrKAg8RUe/Z1hIcUGmg1hFwqSzwOCI8v/LDPRG3CP5uFogg+NSyfwUeIqJhSeFhIpYU7oioAh4Q3HqPgB/AviWBOyKqgXMEd0BD8Yj/fPwGnU/hW/fgTaQAAAAASUVORK5CYII=";ResourceBag.Icons8Refresh32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAG1SURBVFhH7Ze9SgNREIUjCqawMMHExl7sgim0EAUbSxtJ5QvYiY2taGGrra2gPoBY2FhoaeFP9Al8AAU7IfGb60lIJME767LVHvjYnbsz9xw2yyYp5IpVu92eaLVa67ANu0PYUHt6wniEjXc4vnP8hGfO7wfBtSONpSc2PZbxFiZFLWcjTNfgC1a1lK0wvoJTlW5xx0ahpNIvhu1zb6h0ycyZPYMmVLXsE5u0GV5WGS2Zn9u8KXEIzS+pjBL9HXO7e9fwAk86+kIEe0cAenvNF+EQbqEC/hDB3hGAzffpD+aqQwCdd0LcWR2lH39XgDL9dZV9AUycV7heU/m3gr3zGejV7wBu5QHyAJkGwMi+OPYYqGipLwBHe8kcQDlcjJA3QInmzmszhAj2BIDeN9x8GIgQvb6PgOYqdEOYO8cV6L5e1Rol+v3PAAPdEArwKPMFtUSLmWQPIUMWomkBkpqbFOBGpU8KYd9kicxNzF5A4l9U/xJ3bgrzD9jUUnbCvIjxJbxyPqbldMSGk1AaBIYz0IAHeINZjaUnjN5hqDC1/xAnMK2RdIVHDeqDwHQOxtWaK0KFwjcwmcsp1BVc2AAAAABJRU5ErkJggg==";ResourceBag.Icons8Search32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAACHUlEQVRYhdWWO2gUURSGv7sbEi1ESAxBURHMWoit2BlFDGihEHfFFHZiLCXaWFsIWipBOyubWAQNpAkIguCjM1hI8NXEB66vwgXd+FnsVUfF7O7ssFlPM1Oc//wfZ86ce+F/DHV1O83y6kH1qvpc/WItKuq8OqHuSVs/1DHfB1wANgOzwAzwAigD/UAB2A8MAfeB8RDCvbQwSeOgnlWr6mV1bZ38gjoZu3MiC4CL6if1QJO6sQgx3or5sVhkd0r90di54TTiXvW9ejqNeaLORBzQ7maF59QnTQv/rrNG/aCONSt8pp5qxTxR65J6qxnBtvh/FzICGFa/1ltaucR7AaiEEOazAAAeAl3ApkYBBoDXGZkDvAEWgXWNAlSAlRkC9AD5WLchgAWgv9U/IBHr4/NVQ9lqXxyavVm4x634Ts0vlfezAyGEMnAHKGUBABSBmRDCYsMKtRjX8GArzupO9Zu6vVlhUO+qs2pXSvNV6iN1Mo0edVAtq1fUXH3Fb9oV6rT6Uu1LBRALDakf1Ztqb4OajbF7xmE+nBogFtyqPo6n4xl1wz/ytqjn1c/qXDT/AdHaQKvd6kl1IQ7VnHoj3g+n45FrBD2u5tTSHxDFpTyWvBMmQHLADmAXtdU6ALwFngK3gQchBBP5JeAatbOgCoyGEK6naULqUA/56wZdVUfbCtBJECOdCHFkOSCSn2Oq7QARYkSdUnuWBaAj4zvw4Tg4pP5UgAAAAABJRU5ErkJggg==";ResourceBag.Icons8Star16Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABJwAAAScBjbzwzAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEeSURBVDiNlZO9SkNBEIW/TVIkiIqFglY+gjZGjeBPZWmX1tLKMja+iaVFIJBKBKtUBkFB0Sew1UZUAnafRUa5kdwrGRiWmTnn7NllFwpC3VQ3ijCVoiFwBAjc5AFKBbsvAZ/AQF38Z6OxAifqmlpXW5OSk9rJ1B01jcNWwt4sMAXMxboM3GZwd8Cx+gwMgLdY35N6yfCirhie+SOyn1L6CgdVoAHMRE4D+1m7p5OcU20FJ2WbTfVMrRUQa4Fp5gG21HaBQFttZHsj7yCldA2UC9yXU0r9XAF1AXjJ1NW4wJ94VedzBYA9oBfkHaALdNXtmPcCkyuwCzyq50AdOIhcj97TX4GRUB/UC3VlzGw1Zvd55JJ6qOb+ULUSmF/n3xzAx399bZgvAAAAAElFTkSuQmCC";ResourceBag.Icons8StarFilled16Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABJwAAAScBjbzwzAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAF6SURBVDiNlVHNSgJRFP7OnTEh845GRBgRUTtfIMz+Nm4iKFq0iMAI3PQCtvQJ2rfoAdwE0V6iyYfIFi2koghmRi0k7z1tzGbUMTqre8/3c77DAUaUZydXXVsuj+KYo0CGPmXQJ4C9MA6FAe83k3OmoR4BKKHVbHyt+TaMJ8IMDEMddvGIFuZBGG+oATOICPneH3wcZkAteyqlRFtqJWIAkkJQjBkLAJ/1uZ4QibrW3ALBEaSbhlYeuXbiGuCtsAmji6+EXHG2wVQCwP9RgqkkV7yd3hUc29on4ALA+B/iDwaOElm3DPSd0avGM6zFJYDpEPErCb0rM43qTyNwBZlpVAl4CRtNwLNfPJCgWYnNqIj51N/3FRtfndTEZqs3JJBAjRkbATGhBkLNP7ATMdf9moABa8p1n21mFGXUTcuom2ZGEUC7a5rzawJRHduqC+CeBResjPfgx9yqXCJN5wwsWll3fnC5Mgzn1ipwGcbw9QGuwPTuEnnm3+Tfy5SGCQQick4AAAAASUVORK5CYII=";ResourceBag.Icons8SwissArmyKnife32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAADjElEQVRYhb3XW4iVVRQH8HXGMcOIqMC0lJEewgLNoNIQs56UoJqgEiorkwwfIgqxzAiS6GIUVJBSSKYQeaECIyqwCLpo9zCLIsmiNKMbUal5+fWw18GPzzMz54zWevrWf6+99n/vvS77C3yKVTgDXTGAYDLW4Efsxhbcj5MGmtuXw734TZFdmNmP7ULsx3rMRi9ux5fYicmDIfAPZmECfsc9OKqF3dVJ9soWY91Yjl8wslMCOzA3v7flSbzRYoEfsLgfP934EC9jSCcEXsMT+d3ASnyGSRWbqXn0IyrYRCzACRXs2tzAkk4ILMr7Ozr1W/JUYGzF8Y7avC/S5pEKdpaDMqtdAiMyCO+tYNPTyd0YjbnYVpu3NLPg8gp2es5bmgE9KdoRXIV9mJb6GKzOBe5oRSDtGjW9SWAsnsN2jGqXxDP4rnanf+MDJe8PIdDCR5NAD4bjI7yFoe0QOBZfY10Fu17JcZ0SSL0n4+uxAQnkhHOVunBjBVs1WAKJTVPqxzXtkliIvzAu9ePxYocEptXw+enzzHYIdGEDNjuYmi2DsB8C23FKBW9grVLoTqzOOaT5NBqNAxFxXUSMioj7BmTcWvZGxDoMS58iYk5E7ImIlapNT6lo7+OS2m4uU6rfjEGcwFSlWz5dGx+fV3FDFXwzJ92Ziy3FhTm2LB3dNYg0nII9uK1ms0Spol1N4E+lCz6Fx9PBflyq5PLnadMRgdTnKAVuesXm5CTW2wR2YYXSSqfigFJ8Nub4RKUidkwgsUfxKyZUsOV4u6l8ggexEd/kHb2D3ZUJiw+DQDdewE+4ILFxecpTuiJiRUTcFBGzI2JtRKyPiGURMQzHpJ/vB1q8L2k0GvsiYmZEvBQRG7AyIsZHxOaIWBAYquT887K5YGTu5JzUO82Cnj7GL8a7uXv4uDlwdgZatbe/jlcw5EgRqNgNx3F18CKlDyxRKtdpGTyvKq/eI0agPwe9GYSrk+W4zAj/C4F0Mkl5km1RKlcXHqgTyPRcc7gEWvWCTRExISK2RsSmiLg1Ir6tLXRelKy5IuNjTLsLti0ZB/PySv7AzsrYIgcfrltxfuLNR+ng/pL6INKTheQARlfwGVCznaWU9QF/8Tol0aX0hIcq2HCcWtGH4D21DngkSfQqjWV2i7FuPKk87wefAW2QmJckNuDmJDU/M+bnZiz8p5Kp9qzyTtiDr/CwTn9KU/4FEBmLVicvN4YAAAAASUVORK5CYII=";ResourceBag.Icons8Tags32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHaSURBVFhH1ZQ7SwNRFIQTRDsVS7H0D9jmB9gL4htsfKCVhSA2FnbpLASbdIo2IoiVYKmiNraitYpYWIqCbvxOPCcaNvvI3t2FDAzcO+cxs5eQQtvC87wJeAzPIngKN6rVapeOuoOFq/ALVlhcDiM9W/BNZnTcDbIIivmUSpGgtwL39Zocccz56iHqm3BYJZnbgW4BWBBojtYD9+Cj9BCiBs7y9MIP+KnnZ7hNuUPHo8FAlPklfICzLB4LIz0L8B2O64pw0BjH/B4OqBwJei8Is67XYNDoZI5JkdoaPJGvV1lmzyMD0OT85dQmoTz3AZRdg6qHB6Ah0JzBXvRYz059BT7BUSgoqR4cgGIq5gL6++i7gt9wl3tRdM7NA1BIzfw/mO3UYw3M+wMgmvm0SnW4mDcDOxoDIMzAXMwF7PEFOIKHeq0jC3MBu24bAnAZQZQfypJKmZnr3lc4r9IvEOZgLUTG5tfwDnar/AdE+Z+WENKQpXm/yn5QlBAeA2WVnBHb3ECTvcSySonRsrmBZvtNJA6h5jewNXMDQ4lDOJsbGG45RGrmBpbEDpG6uYFlkSEyMzewNDBE5uYGlvtC5GZuwKQeIndzA2YW4iV3cwOmJV5gUV5BpXZDofADwC/irJnmeisAAAAASUVORK5CYII=";ResourceBag.Icons8UncheckedCheckbox32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACTwAAAk8B95E4kAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAD/SURBVFiF7Zc9SkNREEbPPERsgiA22mqQrMENiOgSbESwEpcjIgjZgmvIImxs/Sk0mlLwHZuIF7kvIu8ZC+9XznzMHGaaGfjvilxQHQDbwEqT5wcSeAJGEXE9E0BdBC6AA2AC3EwLtFEAm0APGALHEfGaR9Wheq/uqVXLxmndSt1XH9TLJtOWWqs7XTXO9Nid9ujnkkfqWG2781kAlfqsHn7E0jH3gLuIaLvzRkVEDdwCyzmAP1EBKAAFoAAUgAJQAApACvACrP32SQasA+Ncsj+no/RN3WgynM/hLD9LcwtfvCfAEnAFTNTHjhhW+XxMTtPEd69ZV1OoaXjNit4Bzl2emoZSHdMAAAAASUVORK5CYII=";ResourceBag.Icons8Unpin48Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAEV0lEQVRogc2aS2wWVRTH/1P5vlqqVCQS0UBFogG0JqAYI64QESGkOzXRaFy5QMLChfGx0IXSsFAxLDVR48JofBQfJFXiowkBoqgpIaAE1AQ3DVisGrUtPxf3TOZ28rWdO69yNvP13HvO+f/nnJl77p1KsyzAEuAj4C9gELg2r6M1wNyS8c0UcwFwCif/2fUXYGmoo5vN+CDQVRHeVnE/sLh7gEuAd+3vn4FrQhx1GHiAA3WQAB61eL8C803XAN4z/SmgO8Rhl4EH+DZ2WhH4FVbzE8C61FjDy0xYOaVIfFMFCaAd+M5i7Jxijk8iuJwqJQG8aL6PABdPM68JfHhBkQA2AOeBf4CbMsxvAv2G4yfg6pBgpZIArgB+M3/bA+yauLcUwI9FSOwH5uUEH3kgBoAo0L6JW+xiEleFGBcmAWwz+7PA4lB78+GTOF4bCeAG4G+zvTcPeM9XO/CxTyJzKnGL24CkWyXtl7QxiqJR4DpJvZJWSVosaa6kMUnDko5K2iJppaTXoyh6pAgBw9EhaY+k9XYNMu4iWbG/B4bIJifzPj9T4JiH651G5oQYRlF0DtigJBOSdFLSPkkH5O76iFwWFkrqkdQtaUcURX+UBH6BpNckNSR9FWI4H3jYfvuZOARcVga4DBg2k7yKT5O1VwKuBI6a4XbT1UbCSuZVryQ/B5aEONjiGW/y9JWTANbhWglwDeA2AteR2NHz5uR3YI2nT3exl5cEvAPow3Ws2I1aXtTpC3WQAG4Djpm/MSPSKATec14ZCVwb/Swwbn6OAKtLAZ4KtKNsEkAPcNhsJ4BdQHvp4L2AcV9/1r9LeR5s4CGSTf0JYG1lwFOBXyqDBPC+zX0b6Kwe+eTgfUXLCXjG5j1RD+rJwTfidlm5MwHcY3PeqA+5C7wUOGPB9+UlAdxi4wN1gu8gOV14Bbfr2pWHBLDcxj6rk8CbFnQQW2TykgDWmn5vXeAfs4CngUWpscgAZiYB3G+63XWAvwP3zv4XuD015p9vjmclYSUIsLVq8ItI+vGtqbHrcUs/uO5xdUA5nbDfK6oE3wC+tkBvpcY249YBgC+BhaaPgJdNP906ATBUGXgLuNsCHcZtrAW0Ac/h1oHzwE7gopRd1gd7iKo2RcADFuQM9gUFt0uKD2BHmebIJCATpe0n/OCrcOc648DdprsRd1aJXXsy+ElnYhOtt6cHS8sEkz8BPWW6+4A/TfcJAWemKRKx9FZCwur7U3PYj3uI+7x67wPacvj1y2kvMMcbK6+cSHZex4BlJL3OufiuFRErzWYLffFMAL12l0eBB70yOg6sLAo+Q/z8mcAtSCNGoB93lAHuZLjOL5jhJIBLSQ6wJrzr0+Q5iykoQeVkD9c7TJZS6r2IZM4E8GQK/A/AsprxtpQZSQB3kXSPMBub6xmkRTl1xgPdwLANjAGPzzLWKSVFYn2sHDTFMHDnLGOcUYBO3OfatljxBa5Nzv5/CReQ/A+WAU5VHv2AlwAAAABJRU5ErkJggg==";ResourceBag.SmartshareLogoPng="data:image/png;base64,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";e.ResourceBag=ResourceBag})(t=e.CommonView||(e.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient;var a=s.DOMUtils;class FilterController{constructor(e,t,a,r){this.SearchFunctions={};this.view=e;this.idView=r;this.filterPane=t;this.FilterView=a;this.FilterView.ResizeListeners.push(new s.ResizeStructure(this.filterPane.constructor.name.toLowerCase(),this.filterPane,"filterView"));this.MainType=this.view.Platform.CurrentSpec.GridTemplates[this.view["SpecView"].TemplateId]["ResourceType"];this.isPinned=s.LocalStorage.Get("isPinned")==="true";if(sessionStorage["holdFilterViewId"]){if(sessionStorage["holdFilterViewId"]!==this.idView){this.filterPane.RemoveFilter();sessionStorage["holdFilterViewId"]=this.idView}}else{sessionStorage["holdFilterViewId"]=this.idView}}SearchButtonAction(e){if(this.view.Platform.Toolbar.Topbar.Element.style.display==="none"){let a=this.view.Platform.GetSetting("dateFormat");this.SearchFunctions={};this.SearchFunctions["searchIconSrc"]=t.ResourceBag.Icons8Search32Png;this.SearchFunctions["actionBtnApplySearch"]=()=>{this.filterPane.QuickSearch(this.isPinned)};this.SearchFunctions["actionBtnCancelSearch"]=()=>{this.isPinned=true;this.TogglePinSearchPane();this.view.Platform.Toolbar.Topbar.Hide()};this.SearchFunctions["actionBtnPinSearch"]=()=>{this.TogglePinSearchPane()};this.SearchFunctions["toggleExactSearch"]=()=>{const e=this.SearchFunctions["forms"][0];const t=e.GetField("exactSearchCheck").htmlElement;this.view.Platform.SetSetting(40,"exactSearchPreference",t.checked.toString())};this.SearchFunctions["optionsCaseExist"]=FilterController.getExistingTags(this.view.Platform.Configuration.Tags.hasOwnProperty(this.MainType)?this.view.Platform.Configuration.Tags[this.MainType]:"");this.SearchFunctions["valuesCaseExist"]=[0];this.SearchFunctions["valueCaseExist"]=0;this.SearchFunctions["valueCaseExist"]=0;this.SearchToolbar=(new t.SearchForm).Create(this.view.Platform.Toolbar.Topbar.Element,[this.SearchFunctions],a);const r=this.SearchFunctions["forms"][0];const n=r.GetField("searchDateTimePickerControl");this.originalParent=this.view.Platform.Toolbar.Element.parentElement;this.pinParent=document.querySelector(".bodySection");const o=n.htmlElement;this.SearchDateTimePickerObj=new s.DateRangePicker(o,{date:new Date,from:new Date,to:new Date,type:s.EDateRangeType.Single},{allowEmpty:true,onEnter:()=>{this.filterPane.QuickSearch(this.isPinned)}});const l=r.GetField("TextItemSearchValue").htmlElement;l.oninput=()=>{this.OnInputSearchValue(l)};this.setPinIcon(t.ResourceBag.Icons8Pin48Png);this.view.Platform.Toolbar.Topbar.Show();this.filterPane.FillSearchOptions(e);s.Toolbar.HideAllMenus();this.view.ShowPanes(true);this.filterPane.Show(false);const c=s.Form.GetFieldFromForms(this.SearchFunctions,"TextItemSearchValue");if(c&&c.htmlElement){c.htmlElement["keyDown"]=e=>{if(e.key===s.Utils.INPUTKEY_NAMES.ENTER)this.filterPane.QuickSearch(this.isPinned)};const e=c.htmlElement.parentElement.querySelector("#idTagSelect");e.addEventListener("keydown",(e=>{if(e.key===s.Utils.INPUTKEY_NAMES.ENTER)this.filterPane.QuickSearch(this.isPinned)}))}}}IsPinned(){return this.isPinned}SetPinned(e){this.isPinned=e}SetInitialFilterParams(){if(this.isPinned){const e=s.LocalStorage.Get("searchParams");if(e){const t=JSON.parse(e);const s=this.isPinned?this.pinParent:this.originalParent;const a=s.querySelector("#searchOptionsSelect");const r=s.querySelector("#searchValue");a.value=t.searchBy;r.value=t.value}}}TogglePinSearchPane(){try{if(!this.isPinned){if(!this.pinParent)this.pinParent=document.querySelector(".bodySection");this.pinParent.prepend(this.view.Platform.Toolbar.Topbar.Element);this.view.Platform.Toolbar.Topbar.Element.style.display="flex";this.view.Platform.Toolbar.Topbar.Element.style.zIndex="90";this.view.Platform.Toolbar.Element.style.display="block";this.filterPane.FillSearchOptions();this.setPinIcon(t.ResourceBag.Icons8Unpin48Png);this.isPinned=true;s.LocalStorage.Set("isPinned",true)}else{this.view.Platform.Toolbar.Topbar.Show();this.originalParent.append(this.view.Platform.Toolbar.Topbar.Element);this.view.Platform.Toolbar.Topbar.Element.style.display="flex";this.view.Platform.Toolbar.Topbar.Element.style.zIndex="100";this.setPinIcon(t.ResourceBag.Icons8Pin48Png);this.isPinned=false;s.LocalStorage.Delete("isPinned")}window.dispatchEvent(new Event("resize"))}catch(e){s.Utils.DebugConsoleLog(e)}}RebuildFilterMenu(e){var r,n;const o=[["searchWorklist",t.ResourceBag.Icons8Search32Png,e=>{this.SearchButtonAction()}]];this.view.Platform.Toolbar.AppendControlsToGroup([o],"WorklistLanguage","common.1","workstation");const l=[];let c;l.push(["newFilter",t.ResourceBag.Icons8FilterAdd32Png,e=>{this.OpenFilter()}]);let A=0;let h=0;let d=0;let g=this.filterPane.UnpackSearchSetttings();const u=e===undefined?g:e;A=u.length>0&&u.some((e=>e.name==="DefaultViewFilters"))?(r=Object.keys(u.filter((e=>e.name==="DefaultViewFilters")).pop().filters))===null||r===void 0?void 0:r.length:0;h=u.length>0&&u.some((e=>e.name==="CustomFilters"))?Object.keys(u.filter((e=>e.name==="CustomFilters")).pop().filters).length:0;d=u.length>0&&u.some((e=>e.name==="OrgCustomFilters"))?(n=Object.keys(u.filter((e=>e.name==="OrgCustomFilters")).pop().filters))===null||n===void 0?void 0:n.length:0;const m=l.length;let f=false;u.reverse().forEach((e=>{for(const t in e["filters"]){if(e["filters"].hasOwnProperty(t)){f=true;this.addCustomFilterItem(l,e["filters"],t)}}}));this.view.Platform.Toolbar.AddDynamicSubMenu(s.EToolbarButtonType.DropDown,l,"WorklistLanguage","workstation","filter",false);if(f){c=this.view.Platform.Toolbar.GetButton("filter");const e=c.Child.ButtonItems[m].Element;if(A>0){const t=a.div({className:"customFiltersSeparator",style:{marginTop:"20px"}});let s=c.Child.ButtonItems[1].Element;t.innerText="DEFAULT";e.parentNode.insertBefore(t,s)}if(d>0){const t=a.div({className:"customFiltersSeparator",style:{marginTop:"20px"}});let s=c.Child.ButtonItems[A+1].Element;t.innerText="GENERAL";e.parentNode.insertBefore(t,s)}if(h>0){const t=a.div({className:"customFiltersSeparator",style:{marginTop:"20px"}});let s=c.Child.ButtonItems[A+d+1].Element;t.innerText="PERSONAL";e.parentNode.insertBefore(t,s)}}}ExactSearchControl(e,t){const s=this.SearchFunctions["forms"][0];const a=s.GetField("exactSearchCheck").htmlElement;if(e){a.nextElementSibling.style.display="block";a.disabled=false}else{a.disabled=true}if(t!==undefined)a.checked=t}OnInputSearchValue(e){const t=e.getAttribute("selectedFieldType");if(["string","HumanName"].indexOf(t)>-1){const t=e.value.split(" ");let s=false;for(let e=0;e<t.length;e++){s=t[e].length>=1}let a=this.view.Platform.GetSetting("exactSearchPreference");const r=a==="true";this.ExactSearchControl(s,s?r:true)}}OpenFilter(e){s.Toolbar.HideAllMenus();const t=document.documentElement.clientHeight-this.FilterView.Toolbar.Element.clientHeight;this.filterPane.SetHeight(t-100);this.filterPane.BuildForm(e);this.FilterView.Element.style.display="block";document.querySelector(".mainPage > .panel").classList.add("hide");this.view.ShowPanes(false);this.filterPane.Show(true)}GetFilterPane(){return this.filterPane}addCustomFilterItem(e,a,r){e.push([r,t.ResourceBag.Icons8Filter32Png,e=>{this.filterPane.ApplyFilter(a[r],r);s.Toolbar.HideAllMenus()},"icon"])}setPinIcon(e){if(this.SearchFunctions["forms"]&&this.SearchFunctions["forms"].length>0){const t=this.SearchFunctions["forms"][1];const s=t.GetField("BtnPinFilter").htmlElement;s.innerHTML="";const r=a.img({src:e});s.appendChild(r)}}static getExistingTags(e){const t=s.TagUtils.ParseTagRules(e);const a=[];for(let e=0;e<t.length;e++){if(Array.isArray(t[e])){for(let s=0;s<t[e].length;s++){a.push(t[e][s])}}else a.push(t[e])}return a}}t.FilterController=FilterController})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient;var a=e.Frontend.WebClient.DOMUtils;class SearchForm{Create(e,t,r){var n=new Array;var o=document.createElement("div");a.AddClass(o,"section");var l=document.createElement("div");a.AddClass(l,"block");o["left"]=l;var c=new s.Form(l,t[0],r);c.AddField(new s.Field(s.EFieldType.ImageField,"",{src:t[0].searchIconSrc},{},["leftIconTopBar"]));c.AddField(new s.Field(s.EFieldType.Label,"",{text:"Search by"},{display:"inline-block"},[]));c.AddField(new s.Field(s.EFieldType.Container,"searchContainer",{id:"searchOptionsContainer"},{},[]));c.AddField(new s.Field(s.EFieldType.Container,"breakLine",{id:"breakLine"},{},["breakline"]));c.AddField(new s.Field(s.EFieldType.Label,"",{text:"With value"},{},[]));c.AddField(new s.Field(s.EFieldType.Textbox,"TextItemSearchValue",{id:"searchValue",newline:false},{width:"140px"},["stringInputType","inputType"]));c.AddField(new s.Field(s.EFieldType.Container,"searchDateTimePickerControl",{id:"searchDateTimePicker"},{},["dateInputType","inputType"]));c.AddField(new s.Field(s.EFieldType.DataList,"tagSelect",{id:"idTagSelect",options:t[0].optionsCaseExist,values:t[0].optionsCaseExist,value:t[0].valueCaseExist},{},["tagInputType","inputType"]));c.AddField(new s.Field(s.EFieldType.Checkbox,"exactSearchCheck",{id:"exactSearchCheckId",action:t[0].toggleExactSearch,label:"Exact",checked:false},{},[]));c.Render();o.appendChild(l);var l=document.createElement("div");a.AddClass(l,"block");o["right"]=l;var c=new s.Form(l,t[0],r);c.AddField(new s.Field(s.EFieldType.Button,"BtnApplyFilter",{id:"IdApplyFilter",text:"Search"},{width:"80px"},["green","inline","inlineButton"],t[0].actionBtnApplySearch));c.AddField(new s.Field(s.EFieldType.Button,"BtnCancelFilter",{id:"IdCancelFilter",text:"Close"},{width:"80px"},["red","inline","inlineButton"],t[0].actionBtnCancelSearch));c.AddField(new s.Field(s.EFieldType.Button,"BtnPinFilter",{id:"IdPinFilter",text:"Pin"},{},["transparent","inline"],t[0].actionBtnPinSearch));c.Render();o.appendChild(l);e.appendChild(o);n.push(o);return n}}t.SearchForm=SearchForm})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient;var a=e.Frontend.WebClient.DOMUtils;class TagsForm{Create(e,t,r){var n=new Array;var o=document.createElement("div");a.AddClass(o,"section");o.style.margin="10px";var l=document.createElement("div");a.AddClass(l,"block");o["TagCreate"]=l;var c=new s.Form(l,t[0],r);c.AddField(new s.Field(s.EFieldType.Label,"labelTagCreate",{text:"Tag",width:110,colon:true},{width:"105px",margin:"0 5px 0 0",display:"inline-block"},[]));c.AddField(new s.Field(s.EFieldType.Textbox,"inputTagCreate",{value:t[0].valueInputTagCreate,id:"byTagCreate",newline:false,width:270},{width:"234px",margin:"0 10px 10px 0",display:"inline-block"},[]));c.AddField(new s.Field(s.EFieldType.Button,"BtnCreateTag",{text:"Create"},{display:"inline-block",margin:"0 5px 0 0",width:"70px"},["green inlineButton"],t[0].clickCreateTag));c.AddField(new s.Field(s.EFieldType.Button,"BtnUpdateTag",{text:"Update",newline:false},{display:"none",margin:"0 5px 0 0",width:"70px"},["green inlineButton"],t[0].clickUpdateTag));c.AddField(new s.Field(s.EFieldType.Button,"BtnDeleteTag",{text:"Delete",newline:false},{display:"none",margin:"0 5px 0 0",width:"70px"},["red inlineButton"],t[0].clickDeleteTag));c.AddField(new s.Field(s.EFieldType.NewLine,"",{space:true,text:""},{margin:"0;","line-height":"2px;"},[]));c.AddField(new s.Field(s.EFieldType.Checkbox,"chkImportanTag",{label:"Highlighted",checked:t[0].highLightedActive,action:t[0].actionHighLighted},{},[]));c.Render();o.appendChild(l);e.appendChild(o);n.push(o);var A=document.createElement("div");a.AddClass(A,"section");A.style.display="none";A.style.margin="10px";var l=document.createElement("div");a.AddClass(l,"block");A["TagUpdate"]=l;var c=new s.Form(l,t[1],r);c.AddField(new s.Field(s.EFieldType.Label,"labelTagAdd",{text:"Tag to group",width:110,colon:true},{width:"105px",margin:"0 5px 0 0",display:"inline-block"},[]));c.AddField(new s.Field(s.EFieldType.Textbox,"inputTagAdd",{value:t[1].valueInputTagAdd,id:"byTagAdd",newline:false,width:270},{width:"234px",margin:"0 10px 10px 0",display:"inline-block"},[]));c.AddField(new s.Field(s.EFieldType.Button,"BtnAddTag",{text:"Add",newline:false},{display:"inline-block",margin:"0 5px 0 0",width:"70px"},["green inlineButton"],t[1].clickAddTag));c.AddField(new s.Field(s.EFieldType.Button,"BtnUpdateGroupTag",{text:"Update",newline:true},{display:"inline-block",margin:"0 5px 0 0",width:"70px"},["green inlineButton"],t[1].clickUpdateGroupTag));c.AddField(new s.Field(s.EFieldType.Label,"labelTagRemove",{text:"Tag List",width:110,colon:true},{width:"105px",margin:"0 5px 0 0",display:"inline-block"},["tagList"]));c.AddField(new s.Field(s.EFieldType.SelectBox,"selectTagRemove",{options:t[1].optionsTagRemove,values:t[1].valuesTagRemove,value:t[1].valueTagRemove,width:242,newline:false},{margin:"0 10px 10px 0",display:"inline-block"},["tagList"]));c.AddField(new s.Field(s.EFieldType.Button,"BtnRemoveTag",{text:"Remove"},{display:"inline-block",margin:"0 5px 0 0",width:"70px"},["red inlineButton tagList"],t[1].clickRemoveTag));c.Render();A.appendChild(l);e.appendChild(A);n.push(A);var h=document.createElement("div");a.AddClass(h,"section");h.style.margin="10px";var l=document.createElement("div");a.AddClass(l,"block");h["TagList"]=l;var c=new s.Form(l,t[2],r);c.AddField(new s.Field(s.EFieldType.Container,"containerList",{id:"containerList"},{},["usersGrid"]));c.AddField(new s.Field(s.EFieldType.Label,"listTagsLabel",{text:"Tag List",containerId:"containerList",width:110,colon:true},{},[]));c.AddField(new s.Field(s.EFieldType.List,"ListTags",{id:"listTagsC",containerId:"containerList"},{width:"100%",height:"300px"},[]));c.Render();h.appendChild(l);e.appendChild(h);n.push(h);return n}}t.TagsForm=TagsForm})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(Efferent){var ClientViews;(function(ClientViews){var CommonView;(function(CommonView){var FhirClient=Efferent.Frontend.FhirClient;var WebClient=Efferent.Frontend.WebClient;var Utils=WebClient.Utils;var DOMUtils=WebClient.DOMUtils;const{div:div,span:span,select:select,input:input,button:button,p:p}=DOMUtils;class ResourcePickerController{constructor(e){this.view=e;this.initialized=false;this.ResourceListBox=div({style:{display:"none"},children:[this.breadCrumbContainer=div({className:"breadCrumbContainer"}),this.resourceListBoxTitle=p({}),this.resourceListBoxSearch=div({className:"resourceListBoxSearch",children:[div({className:"flex",children:[span({innerText:"Search"}),this.resourceListBoxSearchSelect=select({style:{width:"208px"}})]}),div({className:"flex",children:[span({innerText:"with value",className:"capitalize"}),this.resourceListBoxSearchInput=input({type:"text",style:{width:"200px",display:"none"}}),this.resourceListBoxSearchDate=div({style:{width:"200px",display:"none",marginRight:"30px",backgroundColor:"white"}})]})]}),this.resourceListBoxColumns=div({}),this.resourceListBoxContent=div({className:"resourceListBox dottedBorder"}),this.resourceListBoxNavigation=div({className:"resourceListBoxNavigation"}),this.resourceListBoxControls=div({children:[this.selectResourceBtn=button({innerText:"Select",className:"green inline",style:{marginRight:"10px",marginBottom:"10px"}}),this.cancelResourceBtn=button({innerText:"Cancel",className:"red inline",style:{marginRight:"10px",marginBottom:"10px"}}),this.createResourceBtn=button({innerText:"Create",className:"blue inline",style:{marginRight:"10px",marginBottom:"10px"}})]})]});let t=this.view.Platform.GetSetting("dateFormat");const s=new WebClient.DateRangePicker(this.resourceListBoxSearchDate,{date:new Date,from:new Date,to:new Date,range:0,type:0},{allowEmpty:true,dateFormat:t},false)}OpenResourceListBox(e,t,s,a,r,n,o){this.fieldProperties=s;this.mainType=e;this.selectedRow=null;this.context=o;this.view.ShowPanes(false);this.breadCrumbContainer.style.display="block";this.breadCrumbContainer.innerText=t?t+" > picking "+e:"Picking "+e;this.resourceListBoxContent.style.display="none";this.resourceListBoxSearch.style.display="none";this.resourceListBoxColumns.style.display="none";this.resourceListBoxNavigation.style.display="none";this.resourceListBoxContent.innerHTML="";this.resourceListBoxSearchSelect.innerHTML="";this.resourceListBoxSearchInput.value="";this.resourceListBoxColumns.innerHTML="";this.resourceListBoxNavigation.innerHTML="";this.resourceListBoxTitle.innerHTML="Select a resource type to list existing records.";if(!this.initialized){this.initialized=true;this.selectResourceBtn.addEventListener("click",(()=>{if(this.selectedRow!=null)a(this.selectedRow.resourceToSend,this.selectedRow.resourceCleanCopy,this.fieldProperties,this.context)}));this.cancelResourceBtn.addEventListener("click",(()=>{r(this.context)}));this.createResourceBtn.style.display="inline-block";this.createResourceBtn.style.display=this.fieldProperties["DisableCreate"]?"none":"inline-block";this.createResourceBtn.addEventListener("click",(()=>{if(!s["DisableCreate"])n(this.mainType,this.fieldProperties,this.context)}))}this.loadResourcesList(e,true)}Show(e){this.ResourceListBox.style.display=e?"block":"none"}Resize(e){this.ResourceListBox.style.height=e+"px";this.resourceListBoxContent.style.maxHeight=e-272+"px"}createResourceListRow(parsedResponse,i){let resourceToSend;const resourceType=parsedResponse["entry"][i]["resource"]["resourceType"];const resourceCleanCopy=parsedResponse["entry"][i]["resource"];const parsedResponseCopy=JSON.parse(JSON.stringify(parsedResponse));const processedBundle=FhirClient.FhirParser.ProcessBundle(parsedResponseCopy,resourceType);const thisProcessedResource=processedBundle[i];if(this.fieldProperties.hasOwnProperty("ReferenceSubResource")){resourceToSend=thisProcessedResource[this.fieldProperties["ReferenceSubResource"]];if(!resourceToSend)return}else{resourceToSend=resourceCleanCopy}const listRow=document.createElement("div");listRow.classList.add("listRow");for(let x=0;x<this.gridTemplateColumns.length;x++){const thisExpression=this.gridTemplateColumns[x]["Expression"];const thisCell=document.createElement("div");WebClient.DOMUtils.AddClass(thisCell,"listRowCell dottedBorder");try{thisCell.innerText=eval("thisProcessedResource."+thisExpression)}catch(e){thisCell.innerText="-"}listRow.appendChild(thisCell)}this.resourceListBoxContent.appendChild(listRow);listRow.addEventListener("click",(()=>{this.highlightRow(listRow);this.selectedRow={resourceToSend:resourceToSend,resourceCleanCopy:resourceCleanCopy}}))}highlightRow(e){const t=document.getElementsByClassName("listRow");for(let e=0;e<t.length;e++){t[e].classList.remove("listRowActive")}e.classList.add("listRowActive")}getFieldResourceTypes(e){let t=[];if(e){for(let s=0;s<e.length;s++){const a=e[s].split("/");const r=a[a.length-1];t.push(r)}}return t}injectSearchParamOptions(e,t){const s=e?e:this.mainType;let a=[];FhirClient.ValueHelper.GetStructureDefinition(s,(()=>{FhirClient.ValueHelper.GetSearchParameters(s,(()=>{const r=FhirClient.ValueHelper.SearchParameters[s];const n=FhirClient.ValueHelper.StructureDefinitions[this.mainType]["snapshot"]["element"];r["entry"].forEach((r=>{const o=r.resource;const l=o["expression"].split(" | ");let c="";let A=false;l.every((r=>{if(r.split(".")[0]===s)c=r.replace("-","");if(c){this.gridTemplateColumns.forEach((r=>{const l=r["Expression"].split("[")[0];let h=l.split(".");for(let l=0;l<h.length;l++){const d=this.mainType+"."+h.slice(0,h.length-l).join(".");n.forEach((n=>{if(n["path"]===d){const l=this.getFieldResourceTypes(n["type"][0]["targetProfile"]);l.forEach((e=>{if(a.indexOf(e)===-1)a.push(e)}));if(l.indexOf(s)>-1)h[0]=s;let d=(e?"":this.mainType+".")+h.join(".");if(d.toLowerCase()===c.toLowerCase()){const a=o["code"].split("-");const n=c.split(".");let l=true;for(let e=a.length-1;e>=0;e--){if(a[e].toLowerCase()!==n[e+1].toLowerCase())l=false}if(l){const a=document.createElement("option");if(o["type"]==="date")a.setAttribute("data","date");a.innerText=r["Label"];a.value=e?s+":"+s+"."+o["code"]:o["code"];t.appendChild(a);this.resourceListBoxSearchSelect.onchange=()=>{this.changeSearchSelect()};this.changeSearchSelect();A=true}}}}));if(A)break}}))}return!A}))}));if(s===this.mainType){a.forEach((e=>{this.injectSearchParamOptions(e,this.resourceListBoxSearchSelect)}))}}))}))}continueInitialize(){if(this.resourceListBoxSearchButtonFilter!==undefined)this.resourceListBoxSearchButtonFilter.remove();if(this.resourceListBoxSearchButtonClear!==undefined)this.resourceListBoxSearchButtonClear.remove();this.resourceListBoxSearchButtonFilter=button({innerText:"Search",className:"green inline autowidth",style:{height:"24px"}});this.resourceListBoxSearch.children[1].appendChild(this.resourceListBoxSearchButtonFilter);const e=this;this.resourceListBoxSearchButtonFilter.addEventListener("click",(()=>{let t;const s=this.resourceListBoxSearchSelect[this.resourceListBoxSearchSelect.selectedIndex];const a=s.getAttribute("data");if(a==="date"){const e=this.resourceListBoxSearchDate.getAttribute("data-range").split(",");if(e[0]!=="")t=e[0]+"T00:00:00.0000000Z,"+e[1]+"T23:59:59.0000000Z"}else{t=e.resourceListBoxSearchInput.value}if(t!==""){const s=e.resourceListBoxSearchSelect.value;e.loadResourcesList(this.cleanQuery+(this.cleanQuery.indexOf("?")===-1?"?":"&")+s+"="+t,false);if(this.resourceListBoxSearchButtonClear!==undefined)this.resourceListBoxSearchButtonClear.remove();this.resourceListBoxSearchButtonClear=button({innerText:"Reset",className:"red inline autowidth",style:{height:"24px"}});this.resourceListBoxSearch.children[1].appendChild(this.resourceListBoxSearchButtonClear);this.resourceListBoxSearchButtonClear.addEventListener("click",(()=>{e.loadResourcesList(this.cleanQuery,false);this.resourceListBoxSearchButtonClear.remove()}))}else{WebClient.Toaster.ShowToast("Input a value to search.",WebClient.Colors.Orange,3)}}))}changeSearchSelect(){const e=this.resourceListBoxSearchSelect[this.resourceListBoxSearchSelect.selectedIndex];const t=e?e.getAttribute("data"):"";if(t==="date"){this.resourceListBoxSearchDate.style.display="inline-flex";this.resourceListBoxSearchInput.style.display="none"}else{this.resourceListBoxSearchDate.style.display="none";this.resourceListBoxSearchInput.style.display="inline-block"}}createNavigationButtons(e){let t;const s=e["link"];this.resourceListBoxNavigation.innerHTML="";for(let e=0;e<s.length;e++){if(s[e].url!==""){const a=div({className:"navButton invert"});a.setAttribute("url",s[e].url);switch(s[e].relation){case"self":t=s[e].url.split("_skip=");a.style.backgroundImage="url('"+Efferent.ClientViews.CommonView.ResourceBag.Icons8Refresh32Png+"')";a.style.order="1";break;case"first":a.style.backgroundImage="url('"+Efferent.ClientViews.CommonView.ResourceBag.Icons8First132Png+"')";a.style.order="2";break;case"previous":a.style.backgroundImage="url('"+Efferent.ClientViews.CommonView.ResourceBag.Icons8Back32Png+"')";a.style.order="3";break;case"next":a.style.backgroundImage="url('"+Efferent.ClientViews.CommonView.ResourceBag.Icons8Forward32Png+"')";a.style.order="4";break;case"last":a.style.backgroundImage="url('"+Efferent.ClientViews.CommonView.ResourceBag.Icons8Last132Png+"')";a.style.order="5";break}a.addEventListener("click",(e=>{this.loadResourcesList(e.target.getAttribute("url"),false)}));if(s[e].url!==undefined&&s[e].url!=="")this.resourceListBoxNavigation.appendChild(a)}}const a=this.resourceListBoxContent.childElementCount;const r=parseInt(t[t.length-1]);const n=p({innerText:`Showing ${e.total>0?r+1:0} to ${r+a} of ${e.total}`,style:{order:"6"}});this.resourceListBoxNavigation.appendChild(n)}loadResourcesList(e,t){WebClient.Loader.Show();this.resourceListBoxTitle.innerHTML=this.fieldProperties["DisableCreate"]?"Select a record from the list below.":"Select a record from the list below or click on 'Create' to build a new one.";this.resourceListBoxContent.style.display="block";this.resourceListBoxSearch.style.display="flex";this.resourceListBoxColumns.style.display="block";this.resourceListBoxNavigation.style.display="flex";const s=this.view.Platform.CurrentSpec.GridTemplates;const a=e.split("?")[0].replace("fhir/","");if(t){for(const t in s){if(s.hasOwnProperty(t)){if(s[t]["ResourceType"]===a){this.gridTemplateColumns=s[t].Columns;let r=[];for(let e=0;e<this.gridTemplateColumns.length;e++){if(this.gridTemplateColumns[e]["Expression"].indexOf(".")>-1){const t=this.gridTemplateColumns[e]["Expression"].split(".")[0];if(r.indexOf(t)===-1&&t.indexOf("[")===-1)r.push(t)}}for(let t=0;t<r.length;t++){e+=(e.indexOf("?")===-1?"?":"&")+"_include="+a+":"+r[t]}break}}}if(this.fieldProperties.hasOwnProperty("ReferenceConditions"))e+=(e.indexOf("?")===-1?"?":"&")+Utils.ResolveVariables(null,this.fieldProperties["ReferenceConditions"]);this.cleanQuery=e}FhirClient.FhirCall.GetResources(e,((e,s,r)=>{if(!s){this.resourceListBoxContent.innerHTML="";this.resourceListBoxColumns.innerHTML="";const s=document.createElement("div");s.classList.add("listRow");this.resourceListBoxColumns.appendChild(s);for(let e=0;e<this.gridTemplateColumns.length;e++){const t=document.createElement("div");WebClient.DOMUtils.AddClass(t,"listRowCell listRowTitleCell color-bg-lighter");t.innerText=this.gridTemplateColumns[e]["Label"];s.appendChild(t)}let r;if(e){r=JSON.parse(e);if(r.hasOwnProperty("entry")){for(let e=0;e<r["entry"].length;e++){if(r["entry"][e].resource.resourceType===a)this.createResourceListRow(r,e)}}}if(t){this.injectSearchParamOptions(null,this.resourceListBoxSearchSelect);this.continueInitialize()}this.createNavigationButtons(r);this.changeSearchSelect();WebClient.Loader.Hide()}else{WebClient.Loader.Hide()}}),this.fieldProperties["CustomHeaders"])}}CommonView.ResourcePickerController=ResourcePickerController})(CommonView=ClientViews.CommonView||(ClientViews.CommonView={}))})(ClientViews=Efferent.ClientViews||(Efferent.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient.Utils;var a=e.Frontend.WebClient.DOMUtils;var r=e.Frontend.WebClient;var n=e.Frontend.FhirClient;var o=e.ClientViews.CommonView;class ShareController{constructor(e,t){this.view=e;this.parent=t;this.favoriteShareList=new o.ShareList(10);this.recentShareList=new o.ShareList(10);try{let t=e.Platform.GetSetting("favoritesShare");this.favoriteShareList=this.favoriteShareList.Deserialize(r.Utils.DecodeBase64(t),10)}catch(e){s.DebugConsoleLog("Could not decode favorite share users")}try{let t=e.Platform.GetSetting("recentlyShared");this.recentShareList=this.recentShareList.Deserialize(r.Utils.DecodeBase64(t),10)}catch(e){s.DebugConsoleLog("Could not decode recent share users")}}OpenShared(e){this.view.Platform.Toolbar.DeselectAllButtons();r.Toolbar.HideAllMenus();const o=this.view.GetFhirEntities();if(o&&o.length>0){const o=this.SharedFlyout;if(o!==undefined&&o!==null)a.RemoveItem(o);a.AddClass(e,"selected");this.SharedFlyout=document.createElement("div");this.SharedFlyout.setAttribute("id","sharedFlyout");a.AddClass(this.SharedFlyout,"sharedSection");const l=this.view.Platform.GetMainContainer();const c=getComputedStyle(l);const A=parseInt(c.margin,10);const h=e.getBoundingClientRect();const d=h.top+h.height-A-1;const g=h.left-A;const u=document.documentElement.clientWidth;this.SharedFlyout.style.top=`${d}px`;this.SharedFlyout.style.left=`${g}px`;const m=document.createElement("form");const f="style = 'line-height: 1.5'";let C="<input type='radio' name='shareOption' value='byQR' id='shareOptionByQR' style='display: none' checked> <label class='shareRadioButtons' for='shareOptionByQR'> Share with QR code</label><br "+f+">";const T="<input type='radio' name='shareOption' value='byMail' id='shareOptionByEmail' style='display: none'> <label class='shareRadioButtons' for='shareOptionByEmail'> To practitioner’s email</label><br "+f+">";let B="<input type='radio' name='shareOption' value='byUser' id='shareOptionByUser' style='display: none'> <label class='shareRadioButtons' for='shareOptionByUser'> To user by name</label><br "+f+">";let S="<input type='radio' name='shareOption' value='byPatient' id='shareOptionByPatient' style='display: none'> <label class='shareRadioButtons' for='shareOptionByPatient'> To patient’s email</label><br "+f+">";let w="<input type='radio' name='shareOption' value='byTeams' id='shareOptionByTeams' style='display: none'> <label class='shareRadioButtons' for='shareOptionByTeams'> By Microsoft Teams<img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAC0ElEQVRYhe2WTYiVZRTHf2fGQE2jBkRctDBwETYmhLNQo41ogqtWgm5cNbYJFxJ9ILlQG1wMg4Jogi4kIjLGUsFaFUKb1JpQiJAiNQ0NP1DHRsefi3uu83p5r953vjb5h8v7Ps855/n/7znPyznwf0eMJVidBSwDngdOA8cj4v54CGuFfIN6W72jXrCGU+q8ySBfp95NEc/k3kvqD+qf6nMTSd6mnle3ldg61EvqxsLedLVHPaF+r3aroy+9Oi/T/WoT+371m8L6mPqH+p76iXpT/WgsAuamgM4m9r3qkXzvTN/5Bft69d/6ekpuTgU2AqWHNqA9n7vUfqA3IobznBnACmB3+swB7gO/FeLPAC+o0yJicEpufgh0A/0Z8CTsSfGbgDvAzvwk9+X+rvT7BbgLrAM+VdvyfSAiBh+eph5V+1ogfgTqZ+pldUAdUs+qCxt83lXvqWfUc+pV9fW6vZ6BAIarCsiYc8AhYAA4GhH/FR0iok89Tq00t4CDEXG+UUDjP1sEfN6EdHlEnC2sLwGH8/0VtZnYY/mcrc4G7gG/lgoALlKrM8Ba4DbwVa6vNfiuzN9o8FapgExRD4DaBVyJiJ4mh3xB7QKX4QLwNiMZKuJ34NlmGaiCoYi4WmawVo9bZfa00TYOAsaEpwJauQP/AKU1nhQBEfHOBHEHYL0EMtJkqqA9YytB7QA6gCv1DPwErFen01ozglr2VlFrZFWxFhgEfqwL2AoMAQseE7Qkg07mWuBjRjrfI8hRbSrwmtpfH1bV1cm3JSJutCxZ3aF+V8F/QXbIaznCfZuT0bC6PVtz61DfzEH0xRb9t6tHck7sVvvUD9SXKxEXDmzLwfLrJ6lXF+bI/saoyB5zcGem9EBe2DKfJepFtXdcyQsEXepf6t/qZnWFulhdox7MGvdWrnFFETPV99Wfc9xSva5+qS6dMOImYtrVmZNKOp54AL7qKi3hBi6gAAAAAElFTkSuQmCC'></label><br "+f+">";let v="<input type='radio' name='shareOption' value='byRecent' id='shareOptionByRecent' style='display: none'> <label class='shareRadioButtons' for='shareOptionByRecent'> Recent list</label><br "+f+">";let y="<div class='toolbarMenuGroup'><div>ROLES</div><div id='rolesBtnsContainer' style='margin: 5px 0px 10px'></div></div>";this.favoriteUsersContainer=document.createElement("div");this.favoriteUsersContainer.style.display="block";this.practitionersContainer=document.createElement("div");if(this.view.Platform.ApplicationTags.hasOwnProperty("guest")||this.view.Platform.ApplicationTags.hasOwnProperty("patient")||sessionStorage["technology"]!=="Efferent"){C="";S="";B="";v="";w="";y=""}m.innerHTML=C+T+B+S+v+w+y;this.inputTitle=document.createElement("div");this.inputTitle.innerText="Enter email:";this.inputTitle.style.marginTop="5px";this.textBox=document.createElement("input");this.textBox.placeholder=!this.view.Platform.ApplicationTags.hasOwnProperty("guest")&&!this.view.Platform.ApplicationTags.hasOwnProperty("patient")?"Start typing for quick search.":"";this.textBox.setAttribute("type","text");this.textBox.style.width="auto";this.textBox.style.margin="5px 0px";this.textBox.style.display="inline-block";this.textBox.setAttribute("mode","byMail");this.copyToClipboard=document.createElement("button");this.copyToClipboard.setAttribute("type","button");this.copyToClipboard.setAttribute("class","copyToClipboardButton");this.copyToClipboard.style.display="none";this.copyToClipboard.innerHTML="Copy";this.copyToClipboard.addEventListener("click",(e=>{this.textBox.select();this.textBox.setSelectionRange(0,this.textBox.value.length);document.execCommand("copy");r.Toaster.ShowToast("Copied to clipboard.",r.Colors.Emerald,2)}));this.buttonShare=document.createElement("button");this.buttonShare.setAttribute("type","button");this.buttonShare.setAttribute("class","okBtn");this.buttonShare.innerHTML="Share";this.buttonShare.disabled=true;this.textBox.addEventListener("input",(()=>{this.shareUiController()}));this.textBox.addEventListener("paste",(()=>{this.shareUiController()}));this.buttonShare.addEventListener("click",(t=>{const n=this.SharedFlyout;n.style.display="none";a.RemoveItem(n);a.RemoveClass(e,"selected");const o=this.textBox.getAttribute("mailToShare");if(o.indexOf("PractitionerRole/")===-1&&!s.ValidateEmail(o)&&o!=="byQR"&&o.indexOf(",")===-1&&sessionStorage["technology"]==="Efferent"){r.Toaster.ShowToast("Please enter a valid email address",r.Colors.BelizeHole,3);return}else{const e=this.textBox.getAttribute("shareMode");switch(e){case"byMailOrRole":this.ShareRecord(o);break;case"byPatient":this.ShareRecord(this.textBox.value,null,null,null,true);break;case"byQR":r.Loader.Show();const e=this.view.GetFhirEntities()[0];const t=r.PlatformContext.PlatformUri+"/platform/qr?id="+e["id"];const s=new XMLHttpRequest;s.open("GET",t,true);s.setRequestHeader("Authorization","Bearer "+sessionStorage["token"]);s.responseType="blob";s.overrideMimeType("application/pdf");s.onload=function(){if(this.status===200){r.Loader.Hide();a.CreateDownloaderAnchor(this.response,"QR Code.pdf");r.Toaster.ShowToast("QR code generated.",r.Colors.Emerald,3)}};s.send();break}}}));const E=document.createElement("button");E.setAttribute("type","button");E.setAttribute("class","cancelBtn");E.innerHTML="Cancel";E.style.display="inline-block";E.addEventListener("click",(t=>{const s=this.SharedFlyout;s.style.display="none";a.RemoveItem(s);a.RemoveClass(e,"selected")}));const F=new Image;F.style.textAlign="center";F.style.margin="0px auto 20px auto";F.style.width="60%";F.style.display="block";F.src=t.ResourceBag.SmartshareLogoPng;const R=document.createElement("div");R.style.display="flex";R.style.justifyContent="center";R.appendChild(this.buttonShare);R.appendChild(E);this.SharedFlyout.appendChild(F);this.SharedFlyout.appendChild(m);const b=m.childNodes;for(let e=0;e<b.length;e++){if(b[e].tagName==="INPUT"){const setFunction=()=>{const t=b[e];t.addEventListener("click",(()=>{this.toggleShareBehaviour(t.value)}))};setFunction()}}const L=document.createElement("div");this.SharedFlyout.appendChild(this.inputTitle);this.SharedFlyout.appendChild(this.textBox);this.SharedFlyout.appendChild(L);this.SharedFlyout.appendChild(this.copyToClipboard);this.SharedFlyout.appendChild(this.favoriteUsersContainer);this.SharedFlyout.appendChild(this.practitionersContainer);this.SharedFlyout.appendChild(R);const P=new t.Suggest("recentUsers");P.CreateSuggestions(this.textBox,this.SharedFlyout);this.parent.appendChild(this.SharedFlyout);const I=document.getElementById("rolesBtnsContainer");const buildRoleShareUi=()=>{for(let e=0;e<this.organizationRoles.length;e++){const t=this.organizationRoles[e]["resource"];const s=r.DOMUtils.input({style:{display:"none"},id:"shareOption_"+t["identifier"][0]["value"],attr:{type:"radio",name:"shareOption",value:t["resourceType"]+"/"+t["id"]}});const a=r.DOMUtils.label({className:"shareRadioButtons",innerText:t["identifier"][0]["value"],attr:{for:"shareOption_"+t["identifier"][0]["value"]}});I.appendChild(s);I.appendChild(a);const n=document.createElement("br");n.style.lineHeight="1.5";I.appendChild(n);s.addEventListener("click",(()=>{this.toggleShareBehaviour(s.value)}))}};if(I){if(this.organizationRoles){buildRoleShareUi()}else{const e=r.PlatformContext.PlatformUri+"/fhir/PractitionerRole?practitioner:missing=true";const t=new n.FhirCall(e,"GET");r.Loader.Show();t.FuncOk=e=>{r.Loader.Hide();if(e!==""){const t=JSON.parse(e);if(t["entry"].length>0){this.organizationRoles=t["entry"];buildRoleShareUi()}else{r.Toaster.ShowToast("Could not get organization roles.",r.Colors.BelizeHole,3)}}else{r.Toaster.ShowToast("Could not get organization roles.",r.Colors.BelizeHole,3)}};t.FuncError=()=>{r.Toaster.ShowToast("Could not get organization roles.",r.Colors.BelizeHole,3);r.Loader.Hide()};t.Send()}}if(g+this.SharedFlyout.clientWidth>u){const e=u-this.SharedFlyout.clientWidth-1;this.SharedFlyout.style.left=`${e}px`}if(!this.view.Platform.ApplicationTags.hasOwnProperty("guest")&&!this.view.Platform.ApplicationTags.hasOwnProperty("patient")){if(this.practitionersList){this.shareUiController()}else{const e=r.PlatformContext.PlatformUri+"/fhir/PractitionerRole?_include=PractitionerRole:practitioner";const t=new n.FhirCall(e,"GET");r.Loader.Show();t.FuncOk=e=>{r.Loader.Hide();if(e!==""){const t=JSON.parse(e);this.practitionersList=this.CreateShareListFromBundle(t);this.shareUiController()}else{this.practitionersList=[];r.Toaster.ShowToast("Could not get practitioners list.",r.Colors.BelizeHole,3)}};t.FuncError=e=>{this.practitionersList=[];r.Toaster.ShowToast("Could not get practitioners list.",r.Colors.BelizeHole,3);r.Loader.Hide()};t.Send()}}else{this.practitionersList=[]}this.toggleShareBehaviour("byQR")}else{r.Toaster.ShowToast("Please select a record",r.Colors.BelizeHole,3);return}}CreateShareListFromBundle(e){const t=[];for(let s=0;s<e["entry"].length;s++){const a=e["entry"][s].resource;if(a["resourceType"]==="Practitioner"){const e=new o.SharedUser;const s=a["name"]!==undefined?a["name"][0].given:null;e.Email=a["telecom"][0].value;e.ID=a["id"];e.Name=s!==null?a["name"][0].family+", "+(Array.isArray(s)?s.pop():s):"";t.push(e)}}return t}ShareRecord(e,t,s,a,o){const l=s?true:false;r.Loader.Show();if(!t)t=0;let c=false;let A=[];if(!l){A=this.view.GetFhirEntities();c=t<=A.length-1}if(e.indexOf("/")===-1)e=e.toLowerCase();if(c||l){try{let c;let h;let d;let g="";if(l){d=s["Payload"]["act"];c=s["Payload"]["aud"];h=s["Payload"]["scope"]}else{const e=A[t];const s=e["id"];const a=e["resourceType"];d=sessionStorage["practitionerId"];c=sessionStorage["organizationId"];g=sessionStorage["organizationCommercialName"];h=a+"/"+s}const executeGetConsent=()=>{const t=r.Utils.GetGuid();const s={consentId:t,resourceReference:h,actor:e,performerReference:d,organizationCommercialName:g,organizationId:c,patientShare:o};n.ConsentManager.SaveConsent(s,(t=>{if(t){if(!l){r.Toaster.ShowToast("The resource has been shared successfully",r.Colors.GreenSea,3);if(e.indexOf("/")===-1)this.pushToRecentlyShared(e);r.Loader.HideAll()}else{r.Toaster.ShowToast("Shared successfully. Please check your email.",r.Colors.Emerald,3);if(a)a();r.Loader.HideAll()}}else{r.Toaster.ShowToast("There was an error while sharing the resource",r.Colors.Alizarin,3);r.Loader.HideAll()}}))};executeGetConsent()}catch(e){r.Toaster.ShowToast("Error sharing",r.Colors.Orange,3)}}}pushToRecentlyShared(e){let s=false;let a=new t.SharedUser;for(let t=0;t<this.practitionersList.length;t++){if(this.practitionersList[t].Email===e){a=this.practitionersList[t];s=true;break}}if(!s){a.Name="";a.Email=e;a.ID=""}this.recentShareList.PushToTop(a);this.view.Platform.SetSetting(40,"recentlyShared",r.Utils.EncodeBase64(this.recentShareList.Serialize()))}shareUiController(){this.practitionersContainer.innerHTML="";this.favoriteUsersContainer.innerHTML="";this.buttonShare.disabled=true;const e=this.textBox.getAttribute("mode");if(e==="byPatient")this.textBox.placeholder="";else if(!this.view.Platform.ApplicationTags.hasOwnProperty("guest")&&!this.view.Platform.ApplicationTags.hasOwnProperty("patient"))this.textBox.placeholder="Start typing for quick search.";if(e==="byPatient"){this.textBox.setAttribute("mailToShare",this.textBox.value);this.buttonShare.disabled=sessionStorage["technology"]==="Efferent"?!s.ValidateEmail(this.textBox.value):true}if(e==="byMail"){const e=this.textBox.value.split(",");const t=e[0];const s=["draft","proposed","active","rejected","inactive","entered-in-error"];let a;a=!(r.Utils.ValidateEmail(t)&&(e.length===1||e.length===2&&s.indexOf(e[1])>-1));this.textBox.setAttribute("mailToShare",this.textBox.value);this.buttonShare.disabled=a}if(e.indexOf("/")>-1||e==="byQR"){this.textBox.setAttribute("mailToShare",e);this.buttonShare.disabled=false}this.textBox.setAttribute("shareMode",e==="byPatient"?"byPatient":e==="byQR"?"byQR":"byMailOrRole");const a=(e==="byRecent"?this.recentShareList.ReturnList():this.practitionersList)||[];for(let n=0;n<a.length;n++){const CreatePractitionerName=()=>{const o=a[n];let l;l=this.favoriteShareList.FindByEmail(o.Email)&&e!=="byTeams"||e==="byRecent";if(this.textBox.value.length>1||l){switch(e){case"byMail":if(o.Email.toLowerCase().indexOf(this.textBox.value.toLowerCase())>-1)l=true;break;case"byUser":if(o.Name.toLowerCase().indexOf(this.textBox.value.toLowerCase())>-1)l=true;break}}if(l===true){const e=document.createElement("img");e.classList.add("favoriteListElement");let a;let n;if(this.favoriteShareList.FindByEmail(o.Email)){a=t.ResourceBag.Icons8StarFilled16Png;n="true"}else{a=t.ResourceBag.Icons8Star16Png;n="false"}e.setAttribute("src",a);e.setAttribute("active",n);const l=document.createElement("div");l.classList.add("ShareNameListElement");l.innerText=o.Name!==""?o.Name:o.Email;l.setAttribute("mail",o.Email);l.setAttribute("id",o.ID);l.addEventListener("click",(e=>{const t=sessionStorage["technology"]==="Efferent"?l.getAttribute("mail"):"Practitioner/"+l.getAttribute("id");this.textBox.setAttribute("mailToShare",t);const a=document.getElementsByClassName("ShareNameListElement");for(let e=0;e<a.length;e++){a[e].style.fontWeight="normal";a[e].style.textDecoration="inherit"}l.style.fontWeight="bold";l.style.textDecoration="underline";this.buttonShare.disabled=sessionStorage["technology"]==="Efferent"?!s.ValidateEmail(t):false}));e.addEventListener("click",(s=>{switch(e.getAttribute("active")){case"false":e.setAttribute("src",t.ResourceBag.Icons8StarFilled16Png);e.setAttribute("active","true");this.favoriteShareList.PushToTop(o);break;case"true":e.setAttribute("src",t.ResourceBag.Icons8Star16Png);e.setAttribute("active","false");this.favoriteShareList.RemoveByEmail(o.Email);break}this.view.Platform.SetSetting(40,"favoritesShare",r.Utils.EncodeBase64(this.favoriteShareList.Serialize()))}));const c=this.favoriteShareList.FindByEmail(o.Email)?this.favoriteUsersContainer:this.practitionersContainer;const A=document.createElement("div");A.className="favoriteItems";c.appendChild(A);A.appendChild(e);A.appendChild(l)}};CreatePractitionerName()}}toggleShareBehaviour(e){this.textBox.setAttribute("mode",e);this.favoriteUsersContainer.innerHTML="";this.practitionersContainer.innerHTML="";this.textBox.readOnly=false;this.textBox.value="";this.textBox.style.width="auto";this.copyToClipboard.style.display="none";const t=e.indexOf("/")>-1||"byQR"?e:"";switch(e){case"byUser":case"byMail":case"byTeams":case"byPatient":if(e==="byUser")this.inputTitle.innerText="Enter name:";if(e==="byMail"||e==="byPatient")this.inputTitle.innerText="Enter email:";if(e==="byTeams"){const e=this.view.GetFhirEntities()[0];r.Loader.Show();r.HttpUtils.AjaxCall(r.PlatformContext.PlatformUri+"/platform/resource-token-link?resourceReference="+e["resourceType"]+"/"+e["id"],"GET","min",null,(e=>{this.textBox.value=e.getResponseHeader("Location");r.Loader.Hide()}),(()=>{r.Toaster.ShowToast("Could not retrieve link.",r.Colors.BelizeHole,3);r.Loader.Hide()}));this.textBox.style.width="auto";this.inputTitle.innerText="Copy and paste the following link to any chat window at Microsoft Teams:";this.textBox.readOnly=true;this.copyToClipboard.style.display="inline-block"}this.textBox.style.display="inline-block";this.inputTitle.style.display="block";this.textBox.focus();break;case"byRecent":case t:this.inputTitle.style.display="none";this.textBox.style.display="none";break}this.shareUiController()}}t.ShareController=ShareController})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(e){var t;(function(e){class SharedUser{}e.SharedUser=SharedUser;class ShareList{constructor(e){this.list=new Array;this.maxListSize=e}ReturnList(){return this.list}PushToTop(e){this.RemoveByEmail(e.Email);this.list.unshift(e);if(this.list.length>this.maxListSize)this.list.length=this.maxListSize}FindByEmail(e){var t=this.list.filter((t=>t.Email===e));if(t.length>0)return t[0]}RemoveByEmail(e){this.list=this.list.filter((t=>t.Email!==e))}Serialize(){return JSON.stringify(this.list)}Deserialize(e,t){var s=JSON.parse(e);if(!Array.isArray(s))return null;var a=new ShareList(t);a.list=s;return a}}e.ShareList=ShareList})(t=e.CommonView||(e.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient;var a=e.Frontend.WebClient.DOMUtils;class Suggest{constructor(e){this.limit=10;this.indexname=e;if(s.LocalStorage.Get(this.indexname)===undefined||s.LocalStorage.Get(this.indexname)==="")s.LocalStorage.Set(this.indexname,[])}CreateSuggestions(e,t){if(s.LocalStorage.Get(this.indexname)){var r=document.createElement("div");a.AddClass(r,"suggestednames");r.style.display="none";var n=s.LocalStorage.Get(this.indexname).split(",");for(var o=0;o<n.length;o++){var l=document.createTextNode(n[o]);var c=document.createElement("div");a.AddClass(c,"suggest_row");c.onclick=function(){this.parentNode.previousSibling.value=this.textContent;this.parentNode.style.display="none"};c.appendChild(l);r.appendChild(c)}t.insertBefore(r,e.nextSibling)}e.onfocus=function(e){this.nextSibling.style.display="inline"}}GetData(e,t=5){return s.LocalStorage.Get(e)}setTopLimit(e){e=e.slice(e.length-this.limit,e.length);return e}clearArrayNoEmails(t){var s=[];switch(typeof t){case"string":s=t.split(",");case"object":s=t}return s.filter((t=>e.Frontend.WebClient.Utils.ValidateEmail(t)))}clearArrayDuplicates(e){var t=[];switch(typeof e){case"string":t=e.split(",");break;case"object":t=e;break}t.reverse();return t.filter(((e,s)=>t.indexOf(e)===s)).reverse()}}t.Suggest=Suggest})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient;class TagController{static ExistTag(e,t,a){let r=false;a.forEach((e=>{var s;const a=((s=e.meta)===null||s===void 0?void 0:s.tag)||[];if(a.some((e=>e.display===t.toUpperCase())))r=true}));if(r){s.Loader.Hide();s.Toaster.ShowToast("The tag you are trying to input is repeated.",s.Colors.Orange,3);return true}return false}static AddTagToResource(e,t,a,r,n){var o=e.Platform.CurrentSpec.GridTemplates[e["SpecView"].TemplateId]["ResourceType"];var l=e.Platform.Configuration.Tags.hasOwnProperty(o)?e.Platform.Configuration.Tags[o]:"";var c=s.TagUtils.ParseTagRules(l);a.forEach((e=>{var a=[];var o={};if(e.meta&&e.meta.tag!==undefined){for(var l=0;l<e.meta.tag.length;l++){var A=e.meta.tag[l]["system"].split("/");var h=A.splice(A.length-1,1);var d=e.meta.tag[l]["code"];if(e.meta.tag[l]["system"].toString().match("Organization"))h="orgValue";if(o[h]===undefined||o[h]===null)o[h]=new Array;o[h].push(d)}}try{a=s.TagUtils.RemoveDuplicatedTags(o["tagValue"]||[]);var g=n===undefined?this.determineMetaOperations(c,t,a):[{task:"Add",tag:t}];this.updateTag(g[0].task,e,g[0].tag,(()=>{r(e)}),0,g)}catch(e){s.Loader.Hide();s.Toaster.ShowToast("Error adding tag",s.Colors.Orange,3)}}))}static CreateExtraTags(t,a,r){const n="tagMenuToolbar";const o=document.getElementById(n+"_extraButtonsContainer");o.innerHTML="";a.forEach((a=>{const n=document.createElement("div");n.className="toolbarMenuItem enabledButton activeTag tagButton extraButton";n.innerHTML=`<span>${a}</span>`;o.appendChild(n);n.addEventListener("click",(()=>{if(a!=="CASE"){const o=t.Platform;e.ClientViews.CommonView.TagController.AddTagToResource(o.CurrentView,a,r,(e=>{t.OnTagChanged(e)}));s.Toolbar.HideAllMenus();o.Toolbar.DeselectAllButtons();n.parentElement.removeChild(n)}else{s.Toaster.ShowToast("The tag CASE cannot be deleted",s.Colors.Orange,3)}}))}))}static determineMetaOperations(e,t,s){var a=[];if(s.length>0){var r=false;var n=[];for(var o=0;o<e.length;o++){if(Array.isArray(e[o])){r=e[o].some((e=>e===t));if(r){n=e[o];break}}}if(r){var l=s.find((e=>n.find((t=>t===e))));if(l!==undefined)a.push({task:"Delete",tag:l})}else{if(s.some((e=>e===t)))a.push({task:"Delete",tag:t})}}if(s.length===0||!s.some((e=>e===t))){if(e.some((e=>{if(Array.isArray(e))return e.some((e=>e===t));else return e===t}))||!s.some((e=>e===t)))a.push({task:"Add",tag:t})}return a}static updateTag(t,a,r,n,o,l){var c;var A;if(r==="CASE"){s.Toaster.ShowToast("The tag CASE cannot be created or deleted",s.Colors.Orange,3);return}if(sessionStorage["technology"]!=="Efferent"){c=s.PlatformContext.PlatformUri+"/fhir/"+a.resourceType+"/"+a.id;A="PATCH"}else{if(t==="Add"){c=s.PlatformContext.PlatformUri+"/fhir/"+a.resourceType+"/"+a.id+"/$meta-add";A="POST"}else if(t==="Delete"){c=s.PlatformContext.PlatformUri+"/fhir/"+a.resourceType+"/"+a.id+"/$meta-delete";A="DELETE"}}var h=new e.Frontend.FhirClient.FhirCall(c,A);var d;if(sessionStorage["technology"]!=="Efferent"){d=[];if(t==="Add"){if(!a.meta.tag||a.meta.tag.length===1&&a.meta.tag[0].code==="SUBSETTED"){d.push({op:"add",path:"/meta/tag/",value:[]})}d.push({op:"add",path:"/meta/tag/-",value:{code:r,display:r,system:"http://efferenthealth.com/schemas/tagValue"}})}else{let e;for(let t=0;t<a.meta.tag.length;t++){if(a.meta.tag[t].code===r){e=t;break}}if(e>=0){d.push({op:"remove",path:"/meta/tag/"+e})}else{s.Toaster.ShowToast("Tag not found.",s.Colors.BelizeHole,3)}}}else{d={resourceType:"Parameters",parameter:[{name:"meta",valueMeta:[{name:"tag",valueTag:[{name:"code",valueCode:r},{name:"display",valueCode:r},{name:"system",valueCode:"http://efferenthealth.com/schemas/tagValue"}]}]}]}}h.BodyData=JSON.stringify(d);h.FuncOk=(e,r,c,A)=>{s.Loader.Hide();if(t==="Delete")s.Toaster.ShowToast("The tag was deleted successfully",s.Colors.BelizeHole,3);else if(t==="Add")s.Toaster.ShowToast("The tag was added successfully",s.Colors.BelizeHole,3);if(n){if(o===l.length-1){n()}else{if(sessionStorage["technology"]!=="Efferent"&&a.meta.tag.length===1&&l[o].task==="Delete")delete a.meta.tag;this.updateTag(l[o+1].task,a,l[o+1].tag,n,o+1,l)}}};h.FuncError=e=>{s.Loader.Hide();if(e===403)s.Toaster.ShowToast("Forbidden tag operation",s.Colors.Orange,3);else s.Toaster.ShowToast("Error in the tag operation",s.Colors.Orange,3);if(n){if(o===l.length-1){n()}else{this.updateTag(l[o+1].task,a,l[o+1].tag,n,o+1,l)}}};s.Loader.Show();h.Send()}}t.TagController=TagController})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var s;(function(t){var s=e.Frontend.WebClient.DOMUtils;var a=e.Frontend.WebClient;const{div:r}=s;class TagPane extends a.SubView{constructor(e,t){super(e.Platform.GetMainContainer(),e.Platform,"MainLanguage");this.dataTags1Form={};this.dataTags2Form={};this.dataTags3Form={};super.HoldAliveElement=true;this.Parent=t;this.view=e;this.Container=r({className:"TagPane configPane"});this.BodySection.appendChild(this.Container);this.Element.style.display="none";super.SetButtons([],(()=>{this.HideSection();try{this.view.Platform.CurrentView.Controller.LoadData()}catch(e){}}))}HideSection(){this.Element.style.display="none";this.view.Platform.Toolbar.DeselectButton("toolbarworklist.1","tags","optionInMenuPressed");try{this.view.Platform.CurrentView.Controller.LoadData()}catch(e){}}ShowSection(){this.Element.style.display="block";a.Toolbar.HideAllMenus();this.Container.innerHTML="";this.buildUI()}OnWindowResize(e,t,s){if(a.DOMUtils.IsDisplay(this.Element)){super.OnWindowResize(e,t,s);this.buildUI()}}setTagsSetting(){var e=this.view.Platform.CurrentSpec.GridTemplates[this.view["SpecView"].TemplateId]["ResourceType"];this.currentTags=this.view.Platform.Configuration.Tags;this.currentTags[e]=this.getTagsString(this.currentArrTags);a.Loader.Show();this.view.Platform.SetSetting(30,"Tags",a.Utils.EncodeBase64(JSON.stringify(this.currentTags)),(t=>{a.Loader.Hide();if(t.status===200){this.view.Platform.Configuration.Tags[e]=this.currentTags[e];this.fieldList.htmlElement["Reset"]();this.fieldList.htmlElement.innerHTML="Loading...";this.listTags();this.cancelRequest();this.fieldList.UpdateValue(this.dataTags3Form,"");a.Toaster.ShowToast("Operation succeeded",a.Colors.BelizeHole,3)}else{this.fieldList.htmlElement["Reset"]();this.fieldList.htmlElement.innerHTML="Loading...";this.listTags();a.Toaster.ShowToast("Operation error",a.Colors.BelizeHole,3)}}),true)}buildUI(){this.dataTags1Form["valueInputTagCreate"]="";this.dataTags1Form["clickCreateTag"]=()=>{var e=this.dataTags1Form["inputTagCreate"];var t=this.dataTags1Form["chkImportanTag"];var s=e.replace(/[^0-9a-z]/gi,"").trim().toUpperCase();if(s==="CASE"||s==="READ"){a.Toaster.ShowToast("Please do not use CASE or READ as tags",a.Colors.BelizeHole,3);return}if(s===""){a.Toaster.ShowToast("Please input a name for the new tag",a.Colors.BelizeHole,3);return}var r=this.view.Platform.CurrentSpec.GridTemplates[this.view["SpecView"].TemplateId]["ResourceType"];const n=this.view.Platform.CurrentSpec.DefaultTags.hasOwnProperty(r)?this.view.Platform.CurrentSpec.DefaultTags[r].split(","):[];if(this.currentArrTags.includes(s)){a.Toaster.ShowToast("Tag already exists",a.Colors.BelizeHole,3);return}if(n.includes(s)){a.Toaster.ShowToast("Tag already exists as default",a.Colors.BelizeHole,3);return}if(t){s=`${s}!`;if(this.currentArrTags.includes(s)){a.Toaster.ShowToast("Tag already exists",a.Colors.BelizeHole,3);return}if(n.includes(s)){a.Toaster.ShowToast("Tag already exists as default",a.Colors.BelizeHole,3);return}}this.formIn1=this.dataTags1Form["form"];var o=this.formIn1.GetField("inputTagCreate");this.currentArrTags.push(s);this.setTagsSetting()};this.dataTags1Form["clickUpdateTag"]=()=>{var e=this.dataTags3Form["ListTags"];var t=this.dataTags1Form["inputTagCreate"];var s=this.dataTags1Form["chkImportanTag"];this.formIn3=this.dataTags3Form["form"];this.fieldList=this.formIn3.GetField("ListTags");if(e!==undefined&&e!==""){var r=t.replace(/[^0-9a-z]/gi,"").trim().toUpperCase();if(r==="CASE"||r==="READ"){a.Toaster.ShowToast("Please do not use CASE or READ as tags",a.Colors.BelizeHole,3);return}if(r===""){a.Toaster.ShowToast("Please input a name for the tag",a.Colors.BelizeHole,3);return}if(s)r=r+"!";this.formIn1=this.dataTags1Form["form"];var n=this.formIn1.GetField("inputTagCreate");n.htmlElement.value=r;n.UpdateValue(this.dataTags1Form,r);this.currentArrTags[parseInt(JSON.parse(e)["id"])]=r;this.setTagsSetting()}};this.dataTags1Form["clickDeleteTag"]=()=>{var e=this.dataTags3Form["ListTags"];var t=this.dataTags1Form["chkImportanTag"];this.formIn3=this.dataTags3Form["form"];this.fieldList=this.formIn3.GetField("ListTags");if(e!==undefined&&e!==""){this.formIn1=this.dataTags1Form["form"];this.currentArrTags.splice(parseInt(JSON.parse(e)["id"]),1);this.setTagsSetting()}};this.dataTags1Form["highLightedActive"]=false;this.dataTags1Form["actionHighLighted"]=()=>{};this.dataTags2Form["valueInputTagAdd"]="";this.dataTags2Form["clickAddTag"]=()=>{this.formIn3=this.dataTags3Form["form"];this.fieldList=this.formIn3.GetField("ListTags");var e=this.dataTags2Form["inputTagAdd"];var t=this.dataTags3Form["ListTags"];var s=this.dataTags1Form["chkImportanTag"];if(t!==undefined&&t!==""&&e!==""){var r=JSON.parse(t);var n=this.currentArrTags[parseInt(r["id"])];var o=e.replace(/[^0-9a-z]/gi,"").trim().toUpperCase();if(o==="CASE"||o==="READ"){a.Toaster.ShowToast("Please do not use CASE or READ as tags",a.Colors.BelizeHole,3);return}if(o===""){a.Toaster.ShowToast("Please input a name for the tag",a.Colors.BelizeHole,3);return}if(s)o=o+"!";var l=this.view.Platform.CurrentSpec.GridTemplates[this.view["SpecView"].TemplateId]["ResourceType"];const h=this.view.Platform.CurrentSpec.DefaultTags.hasOwnProperty(l)?this.view.Platform.CurrentSpec.DefaultTags[l].split(","):[];if(h.includes(o)){a.Toaster.ShowToast("Tag already exists as default",a.Colors.BelizeHole,3);return}const d=Array.isArray(n)?n.some((e=>e===o)):n===o;if(d){a.Toaster.ShowToast("This tag already exists",a.Colors.BelizeHole,3);return}if(n.constructor===Array){this.currentArrTags[parseInt(r["id"])].push(o)}else{var c=new Array;var A=n;c.push(A);c.push(o);this.currentArrTags[parseInt(r["id"])]=c}this.setTagsSetting()}else{a.Toaster.ShowToast("Please input a name for the tag",a.Colors.BelizeHole,3);return}};this.dataTags2Form["clickUpdateGroupTag"]=()=>{this.formIn3=this.dataTags3Form["form"];this.fieldList=this.formIn3.GetField("ListTags");var e=this.dataTags2Form["inputTagAdd"];var t=this.dataTags3Form["ListTags"];var s=this.dataTags1Form["chkImportanTag"];var r=this.dataTags2Form["selectTagRemove"];if(t!==undefined&&t!==""&&e!==""&&r!==""){var n=JSON.parse(t);var o=this.currentArrTags[parseInt(n["id"])];var l=e.replace(/[^0-9a-z]/gi,"").trim().toUpperCase();if(l==="CASE"||l==="READ"){a.Toaster.ShowToast("Please do not use CASE or READ as tags",a.Colors.BelizeHole,3);return}if(l===""){a.Toaster.ShowToast("Please input a name for the tag",a.Colors.BelizeHole,3);return}if(s)l=l+"!";var n=JSON.parse(t);var o=this.currentArrTags[parseInt(n["id"])];if(o.constructor===Array){var c=o.indexOf(r);if(c!==-1)this.currentArrTags[parseInt(n["id"])][c]=l}this.setTagsSetting()}else{a.Toaster.ShowToast("Please input a name for the tag",a.Colors.BelizeHole,3);return}};this.dataTags2Form["optionsTagRemove"]=[];this.dataTags2Form["valuesTagRemove"]=[];this.dataTags2Form["valueTagRemove"]="";this.dataTags2Form["clickRemoveTag"]=()=>{this.formIn3=this.dataTags3Form["form"];this.fieldList=this.formIn3.GetField("ListTags");var e=this.dataTags2Form["selectTagRemove"];var t=this.dataTags3Form["ListTags"];if(t!==undefined&&t!==""&&e!==""){var s=JSON.parse(t);var r=this.currentArrTags[parseInt(s["id"])];if(r.constructor===Array){var n=r.indexOf(e);if(n!==-1){if(r.length>2){this.currentArrTags[parseInt(s["id"])].splice(n,1)}else if(r.length===2){this.currentArrTags[parseInt(s["id"])].splice(n,1);var o=this.currentArrTags[parseInt(s["id"])][0];this.currentArrTags[parseInt(s["id"])]=o}else{this.currentArrTags.splice(parseInt(s["id"]),1)}}}this.setTagsSetting()}else{a.Toaster.ShowToast("Please select a tag",a.Colors.BelizeHole,3);return}};var e=[this.dataTags1Form,this.dataTags2Form,this.dataTags3Form];this.Container.innerHTML="";this.SectionsViewer=(new t.TagsForm).Create(this.Container,e);this.listTags()}getTagsString(e){var t="";e.forEach((e=>{if(e.constructor===Array)t+="["+e.join()+"],";else t+=e+","}));return t.substr(0,t.length-1)}listTags(){this.view.Platform.Configuration.GetConfigurationParams();var e=this.view.Platform.CurrentSpec.GridTemplates[this.view["SpecView"].TemplateId]["ResourceType"];var t=this.view.Platform.Configuration.Tags.hasOwnProperty(e)?this.view.Platform.Configuration.Tags[e]:"";this.formIn3=this.dataTags3Form["form"];this.fieldList=this.formIn3.GetField("ListTags");this.fieldList.htmlElement["Reset"]();var s=a.TagUtils.ParseTagRules(t);s.forEach(((e,t)=>{var s={id:t.toString(),value:e};this.fieldList.htmlElement["AddItem"](JSON.stringify(s))}));this.currentArrTags=s;this.fieldList.htmlElement["Render"]((e=>{this.updateOptions(e)}),(()=>{this.cancelRequest()}))}cancelRequest(){this.formIn1=this.dataTags1Form["form"];var e=this.SectionsViewer;var t=this.formIn1.GetField("inputTagCreate");var s=this.formIn1.GetField("BtnCreateTag");var a=this.formIn1.GetField("BtnUpdateTag");var r=this.formIn1.GetField("BtnDeleteTag");var n=this.formIn1.GetField("chkImportanTag");t.htmlElement.value="";t.UpdateValue(this.dataTags1Form,"");s.htmlElement.style.display="inline-block";a.htmlElement.style.display="none";r.htmlElement.style.display="none";e[0].style.display="inline-block";e[1].style.display="none";n.UpdateValue(this.dataTags1Form,false);n.htmlElement.checked=false;this.formIn2=this.dataTags2Form["form"];var o=this.formIn2.GetField("selectTagRemove");var l=this.formIn2.GetField("inputTagAdd");l.htmlElement.value="";l.UpdateValue(this.dataTags2Form,"");o.htmlElement.innerHTML="<option value='0'>Loading....</option>";o["params"]["value"]=this.dataTags2Form["valueTagRemove"]="";o["params"]["values"]=this.dataTags2Form["valuesTagRemove"]=[];o["params"]["options"]=this.dataTags2Form["optionsTagRemove"]=[];o.htmlElement["UpdateData"](o)}renderSelectTagsGroup(e){this.formIn2=this.dataTags2Form["form"];var t=this.formIn2.GetField("selectTagRemove");t.htmlElement.innerHTML="<option value='0'>Loading....</option>";t["params"]["value"]=this.dataTags2Form["valueTagRemove"]=e[0];t["params"]["values"]=this.dataTags2Form["valuesTagRemove"]=e;t["params"]["options"]=this.dataTags2Form["optionsTagRemove"]=e;t.htmlElement["UpdateData"](t)}updateOptions(e){var t=JSON.parse(e);var s;var a=this.SectionsViewer;var r=this.dataTags1Form["form"];var n=r.GetField("inputTagCreate");var o=r.GetField("BtnCreateTag");var l=r.GetField("BtnUpdateTag");var c=r.GetField("BtnDeleteTag");var A=r.GetField("chkImportanTag");var h=document.getElementsByClassName("tagList");if(t["value"].constructor===Array){a[0].style.display="inline-block";a[1].style.display="inline-block";for(var d=0;d<h.length;d++){h[d].style.display="inline-block"}c.htmlElement.style.display="none";l.htmlElement.style.display="none";o.htmlElement.style.display="inline-block";n.htmlElement.value="";A.htmlElement.checked=false;var g=t["value"];this.renderSelectTagsGroup(g)}else{s=t["value"].replace(/[^0-9a-z]/gi,"");n.htmlElement.value=s;n.UpdateValue(this.dataTags1Form,s);o.htmlElement.style.display="none";c.htmlElement.style.display="inline-block";l.htmlElement.style.display="inline-block";a[0].style.display="inline-block";a[1].style.display="inline-block";for(var d=0;d<h.length;d++){h[d].style.display="none"}var u=/!/g;var m=t["value"].match(u);if(m!==null){A.UpdateValue(this.dataTags1Form,true);A.htmlElement.checked=true}else{A.UpdateValue(this.dataTags1Form,false);A.htmlElement.checked=false}this.renderSelectTagsGroup([s])}}rebuildElementsInConfig(e=false){for(var t=0;t<this.SectionsViewer.length;t++){var s=this.SectionsViewer[t];var a=0;var r=this.Container.clientWidth-(!e?0:10);if(t>0){var n=0;for(var o=0;o<=t;o++){if(parseFloat(this.SectionsViewer[o].style.marginLeft)===20)n=0;n+=this.SectionsViewer[o].clientWidth+parseFloat(this.SectionsViewer[o].style.marginLeft)}if(n>=r)a=0;else a=50}s.style.margin="5px 9px 2px 20px";s.style.marginLeft=parseFloat(s.style.marginLeft)+a+"px";s.style.display="inline-block"}}}t.TagPane=TagPane})(s=t.CommonView||(t.CommonView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));