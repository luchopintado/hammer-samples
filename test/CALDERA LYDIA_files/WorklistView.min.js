var Efferent;(function(e){var t;(function(e){var t;(function(e){class ResourceBag{}ResourceBag.ViewOtherTabPng="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAALBSURBVFiF7Zbda5Z1GMc/v3yXbK2IDecLuT3tgVwTekEQTzT0wAO1QHBlCiHYQQcWan9AiwxirMMIwokHdhAukEBxiCi+jQxEpPYshMTMspAZtdb8dHD/hnfP7j3b86Kd7Hv2u96+3/u+r9913TCNaUzjf0aoJEl9DGgDGoFR4CbwbQjhrwcmQK0HXgVeA54BLgC/xRpPACuAK0AP0FuJmAmJ1U51SP1Z3Vgidp16Tf1dfV99vFry19Wf1K9MsCbly6v71Y/V9pT9OXVY7VV/VPeqM8slrlO/UL9TX1C3qZdS/uXqH97HsLoy5e9V96gt6gX1G/XZLK5HMshfAi4BQ8DzIYR+oBk4nwp7G5ifOs8GdqfO/UBzCKEArAKOAWfVrSUFqB1AH/BhCOHNEMLdMRdJt49hXsbDpAXdizmEEEZCCO8B24HP1M6MXFDb1VF1V4avQz2TOq9X7/lfbEn5D6vvZtTZFGM3ZQl4VL2qnlLrinz16m21LWV7Re2L8W+k7A3xFjxdVGO++nVszMUTvYVG9WIU0lrk26eeU+dmJicxM9QjaleRvSnmnlYXTpQ/FjxH/TR2+VtqiPbZ6gn1pNqUkfek+mXs+AUp+2b1lvqROqskeVHBjjgD+tTl0TZX7TYZSofiVdut9qh31AMmYxo1ZzI/rqirp0xcJKJO7VL/VA+qL0Z7o7rDZEJ+oO5Ul0Zfm/q5ydTcN9lTT2kXqHngHWAb8D1wnOSu/wqMAIuBVmADsAT4BOgOIdyZrHZZ29BkIb0MrAWWAU0kd/4GMAicAI7WbBE9DFT6P/AUsGDSwNIYCiH8UrYAtQG4DpS34cbjH2BRJUXywN8kTVcNLgP5SgTkgEII4Ydq2NVBIDduHU9RwEA15BEDQEslAlqAQg0EFCoVkKuRgAEgN1NdVmZiMzX8BFg+RuJVrApxRfsvywSNUug69OAAAAAASUVORK5CYII=";ResourceBag.Visible32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAApNJREFUWAntlr9rFEEUgO8SibEPVkmqqwSxCFFI45nGMq1I6kB6a/0LhDRqo6ASwcpOgiAxVkqMCpLG1hQWoiiIGKJ3ft8y75xdcvE8/NHsg4957837MTs3s3uNRi31DtQ78J93oDlM/263e5i8KZhO+W8Yd5rN5m6yBx4GWgANR6g4C2cTJxkPQQcU57/BJjxIPGNBMY9rCKHxKJyHbVC24BoswSyMJ9T1OfcCFHPMHR2idaNBYhtewVfowEMo7Rj2EckbYI/AIzDHXGu085gDdYJ9qitggTU4l/TjkYg9AZfhc0J9Ips/gW2+O3A/6dYcj5h9RwKmwW3+AIsGMV7Ulydgu7CqrFVi/CkupRou5D1YOw5uHl40mmHyLTzNg9BX4VZEo09CP5nM4m4TtJrZU9hPwB4z4ff0+pRzDOvwGE5zer1WIV45T3jIQduYn4c9EswthJo7KG2wx3rqWTRvYXwEn7RYEAE9wbcCG+FAb8JzqIq+3iFF34CVyIsRn4fUXvZs5Q29Lr0CkcDovZ4j2BdPgyfpMng+XmonUV9Mc+6ose6quVWxR/lqkmCDT3AP8m20mO8Cr9KdvBK2O3EsUVo4Pp/QnFIjbK+tPezlAn8KjjiEm+jF08aswbAHS+HrNxqTYksN8HkIrV06hKU6TMY1fIe+kE9iL8N3uAlH8zl1fWnOmOV8HnsBrNn/GkYCQfmL6C52frXmsV/DLnjPbyTU9Tk3n9XyylqjA79+EUWiIwlt8Hf8Alehlfxj6GfgAlhc1PWNpRhvljnm/t6r2AIhJOcfI7fWJ70O/hynoPgWJF2fc8YYuw2+AUsHMWrHWDq94ayOFPG6/pXP8UAL2GdBf+wPSbV2bdc7UO/AP9+BHyH+LPpKPnrlAAAAAElFTkSuQmCC";ResourceBag.Icons8AdministratorMale32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACTwAAAk8B95E4kAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAMLSURBVFiF5ZddiFVVFMd/2xklxz6GUWh6sbIyQnRC9CHtYRQ1mDSIpIcEewgSfFB8jnLMkgotRkHEKQhEg4JASMQXTSoIhMgKdKIUGw3xizCcabDm18NdN0+3uXP2lTtPLdjcs9f+r/VfZ521194X/u+SGjVQO4GXgMXAA8AUYADYmVI60qi/SQ2SrwXOAmuAk8BuYC8wBHymblcfajSIXPIe9aa6Tv1P5tQX1RPqDbVnIgI4re7MwL2rDqpTmkk+24rMycC2q3+p3Tm+c2vgQWAUOFUGTCn9BpwHZjczgDuAkZTSaCY+23duAFeBqWpbGVBtATqBi5m+y0WdETUwPwO7ILCdOb6zMpBSugJcAxZkwJcAF1JKTc3AYnVU7crALosMPJbjO7cG2qjsgjMZ2O/jd1qm73JR71QvqcfVukGrbeqX6vmmNqJwPq+sGand6h/qrKaSFwhOq2+Ps96vHpoQ8iB4WR1SF46xtjQOq2cnMoBJ6im1d4y199SvS+yXqANxVnyhzmzoPhCteBhoHcs/cGMc8qeAw8AI0EPlIrOnEf5qBs5Eob0TJ1+7ukMdUb+tc1dYoQ6rB9U/1V71OfV6I+Tt6odBtEn9Sb0c46y6OWpgr3pPwW551M2bMV8bn2BQ/SqH+BG1T70e2/CV0G/0lmwI3asxP6G2RlccUrfVZPF4BD5vPOIu9dOI9qS6Xv0gDNdEJoZjjKgvqFfU99V71VWh31zw2ap+rF5QH61H3KJuiW91SF1UWJusfh5vuV99XX1DPRC6Y4GpkvfWkH+i/lqXPID9ke7Vddanq69FTVxSr6odoZuurgzyLbdD/kS8yTN1Qbewqws18HzonrayQ4rkk7PIA7xb/aGMPLD9hQB2qXdH5voKmBZ1X9RGl/pwtWCrUttQ5gL3qz9nxHBf4fkbYDlwF/Ck2gH8DnwELKLyL2oUOAb8CPxzva8NoA/oyCCvlYPAW/E8P+aDQDewLKU0oK4EtlK5WTVf1F/8t5xTHy+zG6un3w559fZzFDgS47uUkmW2fwMGdVsxzkvDxgAAAABJRU5ErkJggg==";ResourceBag.Icons8Cast32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB+gAAAfoBF4pEbwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIpSURBVFiF7Za7a1VBEMZ/czGal4hiIyJoocFHIyJqaWE6SyFoEbCwEEFs/BcUBEUsjKBEUgVFLWwM2ARTpLCwUdDKB1GiIUbJwxjwZ3HPlcvNTdxzkptY+MEWZ3b3m293zs4MrDKiyCY1gG6gMzMNAH0R4XIJW8x5SX2kTqr3sjGlPlBLKyHgnPpV3VVl61An1LMrIWBIvVbHfl0dzMtX5MpagOk69imgdSUEDAJdanvFoK4HurK5XMj9CtQNwAtgEriRmc9Tvpn9EfEtL2duqJvUHnU0GzfVjUW4ct2A2gocBHYyP3y/gDfA84io948sTYB6BOgHtgAjmcNqlICtwEegKyKGU7lTnLerH9Tb6rpF1jWrd9R3attyCuhUf6gtCWtb1Vn1WAp36jN8D5yOiJm/Lczi/wnYnkK8JlHABDCjnqixjwFDETGXpeYdETFQ0ZLIvTjUo+q0C2NYXateUF9le96qZ1L4U0LQDTwDmqIGQAdwCDhQ9IApIRgGrgJP1Np6vxkYB14Dhxsl4Bbl4rOnztwc0B8R4/O1LZOArMvpq3yre4GxiBgt5LEGRarhfeDkAnPtWVfUBsw2SsAfZAWpp8q0jXJfUAKeNlwA5ZNWp9wR4BSwLyJGUghSE1EqvkfEwzwbGt/F/hfwrwso8hP+BCpNSQtQSYHNJL79JUG9rH5W72aNx6zaq35RL+XlK9KWNwEXgd3A44zjOPASuBIRc3k5VxW/AQQUQavc8f59AAAAAElFTkSuQmCC";ResourceBag.Icons8Delete32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAOdJREFUWAntldEJwzAMRO3SMTpioWt0gK5bXKskIBtZ9ukK/XEgJJbu3tn6SFLa155AN4FSyrPe965ML4Up7CnoEL5/uQmYCRucY4VZYaPaDM1gAIxXnSGlCCjiaUL7BQJEtH2Ou14Br2jckFnTC/B6My7Ut4KsGgRFxTpQv6McSq+Cqa/mhdrFv8zq9PKDkZuaAnQOK9CqQdBVsRfk9Vb5rm4lYEXjhoyaCBjRjvKaegQY8TSh54IBMd5vPg2olDAjbDxHp54wCzaosNGrx7waplutPXLOL6MXKgmrbkK8wt7XnkAzgQ+2xtFqX+VZZgAAAABJRU5ErkJggg==";ResourceBag.Icons8Download32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArZJREFUWAntljtoFEEYx3eTM4mFCacB06ggiCgIQexUCEFEELXTQkQRBQtJFQn4wICFFqLYGdIEYmNsrEQEC4uIjyARBa0CxheIF8UQldzh+ftvdobLMefOHuuB4Ac/5vX/Hjc7O7dB8N8y2oFyuZyH5ozCJYchWRcchBF4B7If8AAuwJrkKEEQ+oiqNQTfy9wYfISHMc9p18IW6I37Z2ivhWH4izYbI/lRmIeTtSKy1gR9MAfDtXSJ8ziHsBKaJKbtgSIcTnRe0G9F+xOO+eitBocO0C94DTI940F4BZet0KODfgC+QqeHPPqVrYgn4D1cgm2g5FPwDdq9AsUi9EvgDZzz8kPYDx9gRaUDYwXSIUtt+F2ECS9HhI/Br1qviNGu7ifmrEseHS4tIOiEq3Q3wyPNZWjzxGoh/qJdtfFZ6AZt+zPYZxcy6hBzPcyA3qAx2G5DM2gHJR8FuyNWkFGH2DnYDSpAN2Z/FJrOWXgLSzPKlRiGXDoTusw26dm/hPOJXg4BfnVd5QqF7124qY4q0d2e2vA7DadSO+KA3xEo5OiXoLWeIPhsqNNPbp8gr0M3CT3QaNtIwmkVMATajnWNqoBcbeQ6Abf0LPTXeR9egNdHhCkUvV7dUTP2bfG5DtF1n9PHAoMDON8GFXGD9glMQRkqbRa9HllNw7+bxWUOwXLmdsAuyMMeYhVoFwxHXRTH4Q4UwGWfmbT/hvQX7YDWQBqXlZichCvQZfI632MEmnddTCWq1r0eGbpo+5k7VDHXQl9vV7UV0RWrJ13CAKG2/nu12GccF2iLTPJJfffzq/WBYrfQJNCc1szYt01dAIH1pTtOslUmSdwfZ9xn5nxb5xn4kzPJdILvgU71dKxdTTsDO3kEX+K5v9eoCHgKxtRXYY0zJQQlbnxy8zNJrs/3DjP+J9vfckhVsxe9OwoAAAAASUVORK5CYII=";ResourceBag.Icons8Grid232Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB+gAAAfoBF4pEbwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADPSURBVFiF7ZchDgIxEEXfEM6wZoMgwWEJjoMgVnMRLsAZVpDgOAw4spIEg0MQsoMppKnY7IhNQ5hv2or//xNNJ4V/l3w2qloAFTAeuPMF1CJyIylbA1vgZAibhrUxeOYBYpcCjIBGRBZ9k1S1BhCRyuA5h65vaVY5gAM4gANkB0gHT6mqB4N/CWD0lF0ALXA3hD3DavG0XQBXEdn0TYqGkcWzis/Z74ADOIADOEB2gPgpboGZql4M/gLA6JkQzYMYYA88iL5rA0mB48AdP6Q3mqo2FXjE7RgAAAAASUVORK5CYII=";ResourceBag.Icons8Grid322Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB+gAAAfoBF4pEbwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGhSURBVFiF7Ze9SgNBFIW/UfE/oCCCiIUgWohFQKxUEHwFBQtLH8AHsBB9AWvLCIpWFr6BraTxBwuxshH/QAlRNMciszC5zm4Xg5jT3OWcvZwzcC+zC/8dLnmQNAisAm119vwECs65e4zZCrANXJiGFiAPXANvRhv19dbwvcAEUAQqRpv0IXZqWEnrki5tXEndqmIuohUkFSL8nO/pjmiXktbD0zUUzQB24lsl9Ruuy9dcRGsHiPA5X/skdViPrADjwFNK2JMUHmA5hb/L6IkGuAWWDNcJnAJrVNcqxJavG4bPA7vALFA22lFWgLJz7iwkglW6jmiPABk9RedcyWg1gRo+hM0AdgaGJR0aLlmbTUkPRpsBiPQM+FqQ9GU9sgJUgOeUkK8R7cNXyye7/0L14rEeP9G8jP5tADuEPZIWDZcM1HTkYhkCiPRM+bog6d16RJP4IfwtpA7hlTMIEs9HtD1gL8LPJ6eNaFehYcNnoBmg4QHCNawAY5JuzDvJ39OBzMcEMAgQ6en09VySjDZCcB+EAfaBUmBYLwg4rrPHH8I3hdA+XdrrcJEAAAAASUVORK5CYII=";ResourceBag.Icons8Plan32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAArFJREFUWAm1l79rFUEQx99TEZUUGlCCIJJS0EIUO0VECRJJETCFotgpCNpZpNc/QYw2QkRCAilsQrBLCjEgdtEqEm1SpAzxB8bn53vuXvbu9t7uvpwDw/zamfnu7Lu9e61WJHU6nQU4lhYiy7badiGV96Dfgq/Du6zfkefQ5+GXjs+n3sE5BC95gn/wzcCT7Xb7t+JqamkM5Sn8At6yTkeeRF8hUSBqiY1cILgJf/Is2o1PPX7CrxV3ARzB/kKDBxQ5gH5cCxw67+ghdY0Fz0uLVqm9Se3L+NUrIxeA9UmegX3n2HX3TgHlLzu2VE1mseQrTKAck30C/m4C08j77OCmsevEQQI6/zGzYD/SdxxZuG4CJrf1VWOTQePHiAEbCMg18la1xhxn7fIQgDyRgm9yo0ElGkBdT3aos33oiT8D9FuPv+BKAkCz02QPUnjWqaJHat2xrfrDKt1kEgAKXYVH4RwAYN5ji3uiKABm52p+ER7AHkfqUppC1wU1ApdpjvjHsrNsRwEgaRDWzvUUHDL6O+QUfMzYiAJ9xmoGgDnzWbPzUeyzthX6HLq4J4qdgC2+gqKd5wSooxincse2sgy4b9umX0sCQEGNXOzSJYxJ12H0u8jy+6CyLAlAJRsHoF4hxD1RFADGvI/qfYkdNgAXvAuiAND4NjyRCKDRI9DF8yERQPYyCuVETYBR6qr1Xbeh+sF4FAB+Azeo9CRYrbhgHODZZ1fRXbSiAJCiGy0VQPAWFJQoAOxEXzS1XzUq1CtFAeAIrtDgXmKTRr8H9Dyn/giDd4A2FDUBjkBfs5UvWhXYKYUAPGL8v3bYZG+3/DoAGyTp4rnWLTkhplqqWSEvAEauRyh/51eyGnS4AKQfZuTDyOyPY4N9bKmsB4bb91+Mxv3wBLwF/y9SbfXot4j+AnduMjnJzAGnAAAAAElFTkSuQmCC";ResourceBag.Icons8Playlist32SharePng="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACTwAAAk8B95E4kAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKLSURBVFiF5ZdLiI1hGMd/D2OM65TFZMGKIlKYWYkpZYMFGwtTLgulENkqFpKycklKk4gUWVEjCyRp3EtySy6xkGZWFLmM+Vl87+E4cb7PmTmN8q9T73kvz/933u953u898L8rSg21BVgFNNTZsw84ERE9VJitBHYBD+sMMDNB7K8EGAa8jIi2erqrj5LXD9Mh1b8NoC5UX6iP1bn1AMjL+MPADWA8WdIsUCcAR4HRBT2eRsTGWgG+AGOS2ZfU1we8AkYWBHhTbTAPYC2wD/gEbAKIiPfA5oLmuaoKEBF3gPmDZfY7/dtVMOQAart6V72uzqkHQF4SdgJPgHFkZdiuNqd20TJ8FhHbagUIQKCfsjcn8BH4XBCg6rw8gHXAXrIzYANARLwrtatJbYqIT3nz8srwKtCaF6TCeBTZ2dGhNkdEf80Afyt1GnAamAGMIEvyqgCDVobqFuAe0AMsL7ourwzb1GvqRXX6H+aMUjvJcuUgsJSf5/8r9aq6Wy09yu1A7+8CbU23lfK+B+pZ9bJ6KfWNVzvVaelzX+1Vl5atG64uUdeqO9RutV89r04tvANAI/CBrOwaU18D0AS8BVYDs4AdEdFVWhQR3yLifEQci4idETEPaAPGAjfVBUV3IPdCoq5XP6h71cbUN1E9qR5R96ir1UnqCPV42rHJuQBFpc5SH6q31SnqIjMdUM+pz9L3i+o89ZZ6atAA0vrR6Re/Uw8lw4ay8dkpd76qXSknpgwaQFmcDvV9JUDZ+OL0yFS3lU/oB6aqzwfgf4vsmG4FVkREn3oGKOVPD9ABrAHOAO2Vf82W8etLpxa9jogLKeZIskopj/k0Iq6o3UDLAL1ql7pF/TiUN6Ju4M13YIPWWahXzI0AAAAASUVORK5CYII=";ResourceBag.Icons8Playlist32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACTwAAAk8B95E4kAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGVSURBVFiF5ZbPKwRhHIefrzZEKAc3FzkoJ+wRJX+FpByUQv4AJwdX4eAgiXJwdldKigNHP5IfuTg4KIrYtv04vENau/tOmteufE5v8870PM18PzMD/z32sZDUAowAqcDMLLBpZvfkwYaAOeAksEBnJLGUL1AF3JhZOiRd0mnE+oSWNZUtIGlA0rWkM0ndIQR8E78CHAKNuKHpk9QMrAN1MRkXZjb5U4EMUB/BMtGxLHAL1MQUuCu16RMYBRaBV2AKwMyegOmYcG9KCpjZEdCbFKxQKrsFZReQ1C/pWNKBpK4QAr4hXAXOgQZcDfslNUXruDW8NLOZnwoYICDHly8n8AK8xRQoeZ5PYAxYwL0DJgDM7PFjnUR8NdwDepKCFUplt6DsApLSkvYl7UjqCCHgG8IN4ApXw2VgUFIjMA80xWScmtlssU3fI6gGnnG1q46OpYDamHBwX9Oi8d2BcWAN1+VhADN7wP09JxJfDXeBtqRghVLZLfiNfH0EOaBd0lVgZmvE+iawhZt2y78i4QjYDsz4Q3kHGktxpGeh0hwAAAAASUVORK5CYII=";ResourceBag.Icons8Shredder32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAC6UlEQVRYhcWXTYjNYRTGf8/EDMOMGZSPECMioSilaJLPslJKw8LWYooVSjY+YmEhCztWKBlZWYnYoUQ+oiaMEGU+zNxxjZnpHov3XPc/f/fjf7t3eOp234/zPud5z3vec98L/xkqNGFmh4CdVfJzW9L5fBMTiixaDiwAblXofJdz5UUxAQAvJR2txLuZLSk2X1MJeTVQKgKYWQ3wGGguk7sPWFexAEkZMzsDzChTQLevrUyAo5dkx2XAPUm9CXkTH8EloCkhZztwrWoCJGWAlqSE5UIAZtYAnGbsfV0OTASeV+hjFTACvI6MvQaOSUplBZwD9hBCVzxrKoeAfcA1SYezR7ACuCnpyHh5NbN5QEpSv5nVASthbGZnxtH5OuA98MbMpkR9/atKOI2Q8I1AbXQiaR2oCJLumFkr8E1SX7Q45RVgZjOBVqoXoQzwQFJ3fKJQBDpcwDCQJhShlNvXAgM+lnb7euA7IcTDwCjQ4GP1vuY+sCnuqNAOv/n3DcKbAGAHoVY8kzQd6AEO+KfHx54AZ4HtvmYRcCXGOQbRCETFtLnyIUIxwndVCiPOOez9WkLk7gJ78/nKCngJtJnZL3KFaDHwLmKTRMCo2494v45wXC3AKU8+AbuBq1EBJ1ztmgjZLMqPQFZANAIDzrU2YtcBnPwjQFIKOBhlMrMXwGCZAkbc/pf3JwEfCbdgm6S/ynyxazYX+AxM9X4qgYCfwGRC9kMoQJ3OMSffgrwCvFY3A5+cBEIoSyHtzvoJu25yAQBLEwsg7F6ECDQSEjNJBAaBBn9D9AMz/Hi/UOBpXkjAMkIidQIzgT4nLYUf5I6sC1jo7YfAxnIErAaeSxoC5hMSKY4LwKvY2FdgtrffErIfQh3YYmYTY/YFBWwAHnl7Xj4Bkk5Kehob7iJXOfdLavf2dcJRbo3zFPotOE7u2l0ml4il8AFIm9lUSYMRsd1mth54lpAnP8xsr5ldjI1tNrMOb//3f1pl4zev9N72CpJZMgAAAABJRU5ErkJggg==";ResourceBag.Icons8UnavailableCloud32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJcSURBVFhH7ZY9SFVhHMZvRhlRVEshNIXaKNonDUGDSBFuItQWZJsYFK1BmxpEzn1ALrdJsKGytoSWUMqhIaGGIskiCIqK7u33vD5XsHs95z3nmgX1wI/3/D/P3/O+51wLf41KpdLhcrm81ubqihtvYoA51tt/bAgGaIf5/0NkGYL4Fugh/xIMwQXowrfeKflEk8Qh8OnMXIUv5hncgyfwDT7AeWh0SXZRXHMIfM0wA7P4+2CDQ0HY24gNqBYewXaHsoviMAQUNQTrTpiDB9hbnVZTzp2Cx+RutDteFLZAM8V74CPXRZiAaeyoPSa3CV7DoF1xouAsfIeHuhnrfg0BZV07LUrknwCdkx12JYvELpBO2RWEHYZgDdthd6rIbaBGH7k+u5JFsvb3ps0lItYBi2fC7lQpH27YXF4kHYRPcNKuKhFbcjDtThS5wzBhs1o0WkfCNZD0Prc6VFPEMw1B3hX4DHegl5o1Di0I5yi8g0N2pYrc6CHIOQBn4DroQN6HzZVgJ/yAjuDIIGrybEcrvICximMcRoORQ9TmGaIN9EcfkfEKTjuWS9TnGULbMKIL7Um3/blFDw3xHmIP5mW4q4vncM7+ukSf6CHI0YEs6kLv6Ezso0sTvVKHINYI+o3ol9FEoj6xQ47XLXolDoF/UHFiC7+oGEdBZ2EM2oKzTtGnagjWXdi34CscC4kV4VDBJEmSnshsHUzDbtjnXm/grRqzPoXlP3gEW8jrAf23kxv6HHe/vaAn8RIyf+xWRNw4+u34bfIQmT5WK65fhmiwe3WlIbj5RZv/vAqFnxUI2B11MrJjAAAAAElFTkSuQmCC";ResourceBag.Icons8Undelete32Png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAABWUlEQVRYhe2WsUrDQByHvxTBbg4OosXJycHFXcVBfAIfQFCktCA4iIuKU19AER9HcXATEQcRfANFQQXB8jmYIWhS0uYSl/4gS/53932Xy10CwwzzK2pHbZYwblPt5Gm4oXbVdkD4ZjxmK2+HYBJ9w0NKDAwPIVEYXkQiGHwQieDwfiRKg+eRKB3eS6IyeJpE5fCERDMGd4sc3bWQUpUl+djL+HbkhifuVSORWPc/a55VU8dLh6e0WVQj9Ux9rASeaLug1mL4m7pUFN7XPo9nfqK+q8tF4blnnuiz7k8+1eeU61bdU0cBol5w4BhoR1F02ofAJHABTAA7wGuiPALMAS3gGljNhBc54dSG+qBeqWMp9Rn1Rd0PDk+ROM+oH6n3aYVgv+XqlLqVUVtTP0JwBop6oN78F3xafVJ3M3dBQcAs0Egp1YF5YBu4A1bK4KNemp6v+MU8VOsA38rrXQY1V4A5AAAAAElFTkSuQmCC";ResourceBag.WorklistLanguageJson={en:{first:"First",home:"Home",filter:"Filter",newFilter:"New filter",editFilter:"Edit current filter",clearFilter:"Clear current filter",showAll:"Show all items",preSavedFilters:"Pre - Saved",last:"Last",next:"Next",prev:"Previous",patientId:"PID",patientName:"Patient Name",patientAge:"Age",seriesCount:"Series",imagesCount:"Images",physician:"Physician",studyDateTime:"Date/Time",studyDescription:"Description",studyModalities:"Modalities",studyFacility:"Facility",searchWorklist:"Search",removeTitle:"Remove",worklistFilterTitle:"Worklist filters",ptNameFilterTitle:"By patient name",ptDobFilterTitle:"By patient DOB",FromTitle:"From",ToTitle:"To",physicianFilter:"By physician",modalitiesFilter:"By modalities",studyDateFilter:"By study date",institutionFilter:"By institution",saveProfileTitle:"Save as new profile",btnSaveFilter:"Save",btnSaveDefault:"Save as default",patientText:"Patient",dateText:"Date",institutionText:"Institution",offlinemode:"Offline",more:"More",editTag:"Edit preset tags",editPatient:"Edit patient",editPractitioner:"Edit user",createPractitioner:"Create user",medicalRecords:"Medical records",profile:"Profile",logout:"Logout",offline:"Offline",createUser:"Create user",restoreStudy:"Restore study"},es:{first:"Primero",home:"Inicio",filter:"Filtrar",newFilter:"Nuevo filtro",editFilter:"Editar filtro actual",clearFilter:"Limpiar filtro actual",showAll:"Mostrar todos los items",preSavedFilters:"guardados",last:"Ultimo",next:"Siguiente",prev:"Anterior",patientId:"PID",patientName:"Nombre paciente",patientAge:"Edad",seriesCount:"Series",imagesCount:"Imagenes",physician:"Médico",studyDateTime:"Fecha/Hora",studyDescription:"Descripción",studyModalities:"Modalidad",studyFacility:"Institución",searchWorklist:"Buscar",removeTitle:"Remover",worklistFilterTitle:"filtro de lista",ptNameFilterTitle:"Por nombre de paciente",ptDobFilterTitle:"Por fecha de nacimiento",FromTitle:"Desde",ToTitle:"Hasta",physicianFilter:"Por médico",modalitiesFilter:"Por modalidad",studyDateFilter:"Por fecha de estudio",institutionFilter:"Por institución",saveProfileTitle:"Guardar nuevo perfil",btnSaveFilter:"Guardar",btnSaveDefault:"Guardar por defecto",patientText:"Paciente",dateText:"Fecha",institutionText:"Institución",offlinemode:"Offline",more:"Más",editTag:"Editar lista",editPatient:"Editar paciente",editPractitioner:"Cambiar datos",createPractitioner:"Crear registro",medicalRecords:"Registros medicos",profile:"Perfil",logout:"Logout",offline:"Offline",createUser:"Crear usuario",restoreStudy:"Recuperar estudio"}};e.ResourceBag=ResourceBag})(t=e.WorklistView||(e.WorklistView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(Efferent){var ClientViews;(function(ClientViews){var WorklistView;(function(WorklistView){var WebClient=Efferent.Frontend.WebClient;var FhirClient=Efferent.Frontend.FhirClient;var Utils=Efferent.Frontend.WebClient.Utils;class WorklistController{constructor(e,t,r){this.Main=e;this.View=t;this.FilterPane=r;this.Main.ResizeListeners.push(new WebClient.ResizeStructure(this.FilterPane.constructor.name.toLowerCase(),this.FilterPane,this.View.ViewName));this.FilterPane.Create();this.pane=this.View.WorklistPane;this.Main.ResizeListeners.push(new WebClient.ResizeStructure(this.pane.constructor.name.toLowerCase(),this.pane,this.View.ViewName))}LoadData(e,t){WebClient.Loader.Show("Loading data...");this.pane.BuildTableHeader();var r;try{if(!e||e===WorklistView.EControlPage.Refresh){var s=WebClient.HttpUtils.GetUrlParameter("URN")||this.View.SpecView.URN;s=Utils.ResolveVariables(null,s);r=WebClient.PlatformContext.PlatformUri+decodeURIComponent(s);if(WebClient.HttpUtils.GetUrlParameter("URN")==="")this.FilterPane.RemoveFilter();var o;if(this.View.Platform.DataBackForViewChange!==undefined){var n=this.View.Platform.DataBackForViewChange[this.View.SpecView.Id];if(n!==undefined){if(n.CurrentPage>1){o="";r.indexOf("?")>-1?o="&_skip=":o="?_skip=";r+=o+(n.CurrentPage-1)*n.PageSize}}else{if(this.View.CurrentPage>1){o="";r.indexOf("?")>-1?o="&_skip=":o="?_skip=";if(e===WorklistView.EControlPage.Refresh)r+=o+(this.View.CurrentPage-1)*this.View.PageSize}}}if(sessionStorage["appliedFilter"]){let e=sessionStorage["searchParamStatus"];this.View.Platform.SearchState(true,e)}this.resourceType=FhirClient.FhirParser.GetResourceType(r);if(this.View.SpecView.hasOwnProperty("Show")){this.showExpression=decodeURIComponent(WebClient.HttpUtils.GetUrlParameter("Show"))||decodeURIComponent(this.View.SpecView.Show);this.showInclude=decodeURIComponent(WebClient.HttpUtils.GetUrlParameter("Include"))||decodeURIComponent(this.View.SpecView.Include)}}else{var l;switch(e){case WorklistView.EControlPage.First:l=this.FirstPageUrl;break;case WorklistView.EControlPage.Prev:l=this.PrevPageUrl;break;case WorklistView.EControlPage.Next:l=this.NextPageUrl;break;case WorklistView.EControlPage.Last:l=this.LastPageUrl;break}r=WebClient.PlatformContext.PlatformUri+"/"+l}var a=new FhirClient.FhirCall(r,"GET");a.FuncOk=e=>{this.Records=parseInt(new URLSearchParams(new URL(r).search).get("_skip"));if(isNaN(this.Records))this.Records=0;if(sessionStorage["appliedFilter"]){let e=sessionStorage["searchParamStatus"];this.View.Platform.SearchState(true,e)}const s=WebClient.LocalStorage.Get("isPinned")==="true";if(s&&this.View.FilterController){this.View.FilterController.SearchButtonAction();this.View.FilterController.SetPinned(false);this.View.FilterController.TogglePinSearchPane();this.View.FilterController.SetInitialFilterParams()}try{if(e!==""){var o=JSON.parse(e);this.FirstPageUrl=null;this.PrevPageUrl=null;this.NextPageUrl=null;this.LastPageUrl=null;for(var n=0;n<o["link"].length;n++){var l=o["link"][n];switch(l["relation"]){case"next":this.NextPageUrl=l["url"];break;case"first":this.FirstPageUrl=l["url"];break;case"last":this.LastPageUrl=l["url"];break;case"previous":this.PrevPageUrl=l["url"];break}}if(this.showExpression&&t===undefined)this.postProcessBundle(o,this.showExpression,this.showInclude);else this.fillWorklistData(o,this.resourceType);this.pane.fitColumnWidths()}}catch(e){this.fillWorklistData(false,this.resourceType);Utils.DebugConsoleLog("Config error Json parse: "+e)}};a.FuncError=()=>{WebClient.Toaster.ShowToast("There are no records for this view.",WebClient.Colors.BelizeHole,3);WebClient.Loader.HideAll()};a.Send()}catch(e){WebClient.Toaster.ShowToast("Error retrieving records.",WebClient.Colors.BelizeHole,3);WebClient.Loader.Hide()}}Show(){this.View.Platform.Toolbar.Element.style.display="block";this.pane.WorklistPane.style.display="block"}ExecuteDefaultAction(e){if(this.View.DefaultAction!=null){const e=JSON.parse(JSON.stringify(this.View.DefaultAction));if(Array.isArray(e.Action)){for(let t=0;t<e.Action.length;t++){if(e.Action[t].Type==="ViewAction"){if(this.Main.GetSetting("onDoubleClick")==="newTab"||this.Main.GetSetting("onDoubleClick")==="newWindow")e.Action[t]["NewWindow"]=true;else if(e.Action[t].hasOwnProperty("NewWindow"))delete e.Action[t]["NewWindow"]}}}else{if(e.Action.Type==="ViewAction"){if(this.Main.GetSetting("onDoubleClick")==="newTab"||this.Main.GetSetting("onDoubleClick")==="newWindow")e.Action["NewWindow"]=true;else if(e.Action.hasOwnProperty("NewWindow"))delete e.Action["NewWindow"]}}var t=new WebClient.ResourceActionController(e);t.ExecuteAction(this.View.WorklistPane.SelectedEntities,this.View)}}UpdateRow(e){FhirClient.ValueHelper.GetFullResource(e.resourceType,e.id,(t=>{var r=JSON.parse(t);e.meta=r.meta;this.pane.UpdateTagsOnElementList(e,e.id)}))}updateSortIcon(){this.pane.WorklistColumns.forEach((e=>{e.SetDefaultSortIcon()}));const e=+sessionStorage.getItem("sortColIndex");this.pane.WorklistColumns.forEach(((t,r)=>{if(e===r)t.SetSortIcon()}))}fillWorklistData(e,t){if(e){this.getTable(e,t,((e,t,r)=>{this.View.Records=e;this.View.WorklistSize=t;this.View.CurrentPage=r/this.View.PageSize+1;this.View.LoadResourceList();this.updateSortIcon();WebClient.Loader.HideAll()}))}else{this.View.Records=[];this.View.WorklistSize=0;this.View.CurrentPage=1;this.View.LoadResourceList();this.updateSortIcon();WebClient.Toaster.ShowToast("There are no records for this view.",WebClient.Colors.BelizeHole,3);WebClient.Loader.Hide()}}postProcessBundle(rawBundle,show,include){var bundle=FhirClient.FhirParser.ProcessBundle(rawBundle,this.resourceType);var first=true;WebClient.Loader.Hide();if(bundle.length>0){var idList="";var posResourceType="";for(var ix=0;ix<bundle.length;ix++){try{var item=eval("bundle[ix]."+show);var refId=item;var dataCharId=refId.split("/");posResourceType=dataCharId[0];idList+=(first?"":",")+dataCharId[1];first=false}catch(e){}}var url=posResourceType+"?_id="+idList+include||"";var postProcessCall=new FhirClient.FhirCall(url,"GET");this.postProcessedCallUrl=url!==""?"/fhir/"+url:undefined;WebClient.Loader.Show();postProcessCall.FuncOk=e=>{WebClient.Loader.Hide();var t=JSON.parse(e);this.fillWorklistData(t,posResourceType)};postProcessCall.FuncError=()=>{WebClient.Loader.Hide();WebClient.Toaster.ShowToast("There are no records for this operation.",WebClient.Colors.BelizeHole,3)};postProcessCall.Send()}else WebClient.Toaster.ShowToast("There are no records for this operation.",WebClient.Colors.BelizeHole,3)}getTable(bundle,resourceType,func){const response=[];const processedBundle=FhirClient.FhirParser.ProcessBundle(bundle,resourceType);const headers=this.View.HeaderStructure;for(let i=0;i<processedBundle.length;i++){const resource=processedBundle[i];const row=[resource];for(let j=0;j<headers.length;j++){var column=headers[j];const splitExpressionBase=column.Expression.split("|");for(let k=0;k<splitExpressionBase.length;k++){const results=[];FhirClient.FhirParser.GetField2(resource,splitExpressionBase[k],results);if(column.LookupTable){for(let e=0;e<results.length;e++)if(typeof results[e]==="string"&&column.LookupTable.hasOwnProperty(results[e]))results[e]=column.LookupTable[results[e].toString()]}const content=results.join(", ");if(content||k===splitExpressionBase.length-1){try{const toolTipContent=eval("resource."+column.TooltipExpr);if(toolTipContent)row.push(content+">"+toolTipContent+"<");else row.push(content)}catch(e){row.push(content)}break}}}response.push(row)}const links=bundle["link"];let currentPageNow=0;for(let e=0;e<links.length;e++){const t=links[e]["relation"];if(t==="self"){if(links[e].hasOwnProperty("url")){const t=links[e]["url"];const r=t.split("_skip=");if(r.length===2){currentPageNow=parseInt(r[1]);break}}}}func.call(this,response,bundle["total"],currentPageNow)}}WorklistView.WorklistController=WorklistController})(WorklistView=ClientViews.WorklistView||(ClientViews.WorklistView={}))})(ClientViews=Efferent.ClientViews||(Efferent.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var r;(function(t){var r=e.Frontend.WebClient.Utils;var s=e.Frontend.WebClient.DOMUtils;var o=e.Frontend.WebClient;var n=e.Frontend.WebClient.CalendarUtils;var l=e.Frontend.WebClient.LayoutManager.LayoutManager;var a=e.Frontend.WebClient.LayoutManager.LayoutType;var A=e.Frontend.WebClient.LayoutManager.Panel;var c=e.Frontend.WebClient.LayoutManager.PanelOrientation;var h=e.Frontend.WebClient.WorklistRow;const{div:d,table:u,thead:g,tbody:f,tr:C,td:w,span:p,ul:m}=s;class WorklistPane extends o.WorklistGrid{constructor(e,t){const s=t.Platform.ApplicationTags.hasOwnProperty("sort");WorklistPane.processHeaders(t,s);const initializeWorklistColumns=e=>{const s=t.HeaderStructure;const n=[];for(let t=0;t<s.length;t++){const l=s[t].Sortable;let a={sortAction:()=>{},holdAction:()=>{}};if(l){a["sortAction"]=()=>{const n=e.WorklistSize;if(n>WorklistPane.limitSorting){o.Toaster.ShowToast(`Cannot sort datasets of ${r.NumberWithCommas(WorklistPane.limitSorting)}+ records. Please constraint your search filter`,o.Colors.Orange,4);return false}let l=o.HttpUtils.GetUrlParameter("URN")||this.worklistView.Platform.CurrentView["SpecView"].URN;const a=new URLSearchParams("view="+this.getCurrentView()+"&URN="+l);const A=/_sort=(.*?)&/;const c=A.exec(l);if(c)l=l.replace(c[0],"");const h=l.split("?");const d=o.HttpUtils.GetUrlParameter("URN");const u=d&&d.indexOf("_sort="+s[t].SortQuery)>-1?"-":"";const g="_sort="+u+s[t].SortQuery+"&";a.set("URN",h[0]+"?"+g+h[1]);window.history.replaceState("Page","Title","main.html?"+a.toString());e.LoadData();return true};a["holdAction"]=()=>{e.FilterController.SearchButtonAction(s[t].SortQuery);return true}}const A=new o.WorklistColumn(s[t].ColumnName,80,a,l?o.EWorklistSort.Neutral:o.EWorklistSort.None,o.EWorklistFilter.Up,!l,s[t].TooltipText);n.push(A)}return n};const n=initializeWorklistColumns(t);super(n);this.WorklistColumns=n;const h=new l(e);h.SetLayout(a.FLOW,{orientation:c.VERTICAL});const d=new A({className:"worklistPane",style:{display:"block"}});const u=new A({className:"infobar"});this.tableElement=this.CreateTable();this.parentList=this.CreateList();const g=new A({domElement:this.tableElement});const f=new A({domElement:this.parentList});d.Add(g);d.Add(f);h.Add(d);h.Add(u);this.parent=e;this.worklistView=t;this.HighligthActionMenu=this.HighligthTagsMenu;this.TriggerTagEvent(t);this.WorklistPane=d.GetDOMElement();this.TriggerSelection=()=>{}}CreateTable(){return u({className:"workListTable",children:[this.THead=g({}),this.TBody=f({})]})}CreateList(){return m({className:"workListUl"})}AddWorklistEventListeners(){const e=new Hammer(this.WorklistPane);e.get("pan").set({direction:Hammer.DIRECTION_ALL,pointers:0,threshold:0});e.on("panstart panmove panend",(e=>{if(e.type==="panmove"){const t=e.deltaY<0?-e.distance:e.distance;const r=e.additionalEvent==="panup"||e.additionalEvent==="pandown";s.ScrollElement(this.WorklistPane,t,r)}}));s.ScrollElement(this.WorklistPane)}BuildTableHeader(){this.THead.innerHTML="";super.CreateHead(this.THead)}UpdatePaginationBar(e,t,r,o){const n=this.worklistView.Controller.Records;const l=o>0?n+1:0;const a=n===0?o:l+o-1;const A=e?`of ${e}`:"";const c=p({innerHTML:`<b>Records shown: </b>${o.toString()} |`});const h=p({innerHTML:`from ${l} to ${a} ${A}`});const d=document.querySelector(".infobar");s.SetOptions(d,{innerHTML:"",children:[c,h]})}BuildTableBody(e){const t=[];const r=this.worklistView.Platform.GetSetting("dateFormat");this.TBody.innerHTML="";this.parentList.innerHTML="";this.From=1;this.PageSize=30;for(let s=0;s<e.length;s++){const l=e[s];const a=[];l.forEach(((e,t)=>{const s=typeof e;if(s==="string"&&o.Utils.IsValidDate(e)){const s=n.GetFormattedDateTimeFromDB(e,r);l[t]=s!==""?s:o.Utils.FormatValue(e)}else if(s==="string"){l[t]=o.Utils.FormatValue(e)}else if(Array.isArray(e)){e.forEach(((t,r)=>{if(typeof t==="string")e[r]=o.Utils.FormatValue(t)}))}}));l.forEach(((e,t)=>{if(t>0)a.push(new o.ItemCell(e))}));const A=new o.WorklistRow(l[0],a,(()=>{}),(()=>{this.worklistView.Controller.ExecuteDefaultAction(this)}),this);t.push(A)}this.Rows=t;let l;super.CreateBody(this.TBody,this.parentList,((e,t)=>{l=o.TagUtils.GetTags(e.EntityItem);if(l.length>0)this.UpdateGridElementTag(e.Element,e.EntityItem["id"],l,t,true,e)}),((e,t,r,n,a)=>{l=o.TagUtils.GetTags(e.EntityItem);if(l.length>0){s.RemoveClass(t,"toHide");this.UpdateListElementTag(n,e.EntityItem["id"],l,true)}}));const a=getComputedStyle(this.WorklistPane);if(a.display!=="none"){const e=parseInt(a.marginTop,10);const t=parseInt(a.marginBottom,10);const r=document.documentElement.clientHeight-this.WorklistPane.offsetTop-(e+t+45);this.WorklistPane.style.height=r+"px"}}fitColumnWidths(){const e=document.getElementsByClassName("contentDiv");for(let t=0;t<e.length;t++){e[t].removeAttribute("style")}const t=this.WorklistColumns[this.WorklistColumns.length-1].Element;const r=t.offsetLeft+t.clientWidth-(this.WorklistPane.offsetLeft+this.WorklistPane.clientWidth);let s=[];for(let e=0;e<this.WorklistColumns.length;e++){s.push(this.WorklistColumns[e].Element.clientWidth)}let o=0;if(r>0){for(let e=0;e<r;e++){o=Math.max(...s);s[s.indexOf(o)]--}for(let t=0;t<e.length;t++){e[t].style.maxWidth=o+"px"}}}UpdateListElementTag(e,t,r,o){const n=document.querySelector(`.listTagsBlock_${t}`);if(n)s.RemoveItem(n);const l=p({className:`listTagsBlock_${t} tagSpan`,children:r.map((e=>this.CreateTag(e)))});if(o)e.appendChild(l);else{if(s.HasClass(e,h.SELECTED_CLASSNAME))s.AddClass(l,h.SELECTED_CLASSNAME);const t=e.firstElementChild.firstElementChild.children;t[t.length-1].appendChild(l)}}UpdateTagsOnElementList(e,t){const r=e["rowClass"];const n=o.TagUtils.GetTags(e);if(n.length>0){const s=document.getElementsByClassName("WorklistGridTr");const o=document.getElementsByClassName("WorklistListLi");for(let o=0;o<s.length;o++){const l=s[o];const a=l.getAttribute("data-entityID");if(a===t){this.UpdateGridElementTag(l,t,n,e["rowClass"].Rows.length,false,r);r.EntityItem=e;this.HighligthTagsMenu();break}}for(let s=0;s<o.length;s++){const l=o[s];if(l.getAttribute("data-entityID")===t){this.UpdateListElementTag(l,t,n,false);r.EntityItem=e;this.HighligthTagsMenu();break}}}else{let o;o=document.querySelector(`.gridTagsBlock_${t}`);if(o){s.RemoveItem(o);r.EntityItem=e;this.HighligthTagsMenu()}o=document.querySelector(`.listTagsBlock_${t}`);if(o){s.RemoveItem(o);r.EntityItem=e;this.HighligthTagsMenu()}}}UpdateGridElementTag(e,t,r,o,n,l){const a=document.querySelector(`.gridTagsBlock_${t}`);if(a)s.RemoveItem(a);const A=d({className:`gridTagsBlock_${t} ${l.tagClassname}`,children:r.map((e=>this.CreateTag(e)))});const c=e.firstChild;if(c&&c.firstChild)c.insertBefore(A,c.firstChild)}HighligthTagsMenu(){const e="tagMenuToolbar";const t="activeTag";let r=[];switch(this.SelectedEntities){case undefined:const n=document.getElementById(e).getElementsByClassName(t);const l=[].slice.call(n);for(let e of l)s.RemoveClass(e,t);break;case null:break;default:r=o.TagUtils.SelectTagToMenu(this.SelectedEntities);break}const n=document.getElementById(e+"_extraButtonsContainer");const l=[];if(this.SelectedEntities!==undefined&&this.SelectedEntities!==null){let e=[];for(let t=0;t<this.SelectedEntities.length;t++){const r=o.TagUtils.GetTags(this.SelectedEntities[t]);const s=e.concat(r);e=s}if(e){n.innerHTML="";for(let t=0;t<e.length;t++){if(r.indexOf(e[t])===-1&&e[t]!=="CASE"&&!e[t].match("INVALID")&&l.indexOf(e[t])<0){this.worklistView.CreateExtraTag(e[t],n,l)}}}}else{n.innerHTML=""}}CreateTag(e){const t=["CASE"];const r=["READ"];const o=e.indexOf("!")>=0;const n=p({className:"tag ",innerHTML:e});if(o)s.AddClass(n,"tagred");if(t.indexOf(e)!==-1)s.AddClass(n,"tagorange");if(r.indexOf(e)!==-1)s.AddClass(n,"tagblue");return n}GetParent(){return this.parent}OnWindowResize(e,t){const r=getComputedStyle(this.WorklistPane);const s=r.display;const o=window.getComputedStyle(this.worklistView.Controller.FilterPane.WorklistFilter).display;let n=0;if(s!=="none")n=this.WorklistPane.offsetTop;else if(o!=="none")n=this.worklistView.Controller.FilterPane.WorklistFilter.offsetTop;if(s!=="none"||o!=="none"){let e=0;if(document.documentElement.clientWidth>=768)e=20;const t=document.documentElement.clientHeight-n-(e+20);this.WorklistPane.style.height=t+"px"}this.fitColumnWidths()}getCurrentView(){let e=decodeURIComponent(o.HttpUtils.GetUrlParameter("view"));if(e==="")e=this.worklistView.Platform.CurrentView["SpecView"].Id;return e}static processHeaders(e,t){let r="";for(let s=0;s<e.HeaderStructure.length;s++){const o=e.HeaderStructure[s];let n=false;if(t){const t=e.FilterProperties;for(let e in t){if(t.hasOwnProperty(e)){const s=o.Expression.split("|");for(let o=0;o<s.length;o++){if(t[e].length===1){if(t[e][0]["ColumnExpression"]===s[o]){n=true;r=t[e][0]["FilterQuery"];break}}}}}}o.ColumnName=o.Label;o.Sortable=n;o.SortQuery=r}}}WorklistPane.limitSorting=1e3;t.WorklistPane=WorklistPane})(r=t.WorklistView||(t.WorklistView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(e){var t;(function(t){var r;(function(t){var r=e.ClientViews.CommonView;class WorklistToolbarController{static Register(s,o){this.view=s;const n=[["first",e.ClientViews.CommonView.ResourceBag.Icons8First132Png,e=>{s.WorklistPane.WorklistPane.scrollTo(0,0);if(s.Controller.FirstPageUrl!==null&&s.Controller.FirstPageUrl!==undefined&&s.Controller.FirstPageUrl!=="")s.Controller.LoadData(t.EControlPage.First)}]];const l=[["prev",e.ClientViews.CommonView.ResourceBag.Icons8Back32Png,e=>{s.WorklistPane.WorklistPane.scrollTo(0,0);if(s.Controller.PrevPageUrl!==null&&s.Controller.PrevPageUrl!==undefined&&s.Controller.PrevPageUrl!=="")s.Controller.LoadData(t.EControlPage.Prev)}]];const a=[["next",e.ClientViews.CommonView.ResourceBag.Icons8Forward32Png,e=>{s.WorklistPane.WorklistPane.scrollTo(0,0);if(s.Controller.NextPageUrl!==null&&s.Controller.NextPageUrl!==undefined&&s.Controller.NextPageUrl!=="")s.Controller.LoadData(t.EControlPage.Next)}]];const A=[["last",e.ClientViews.CommonView.ResourceBag.Icons8Last132Png,e=>{s.WorklistPane.WorklistPane.scrollTo(0,0);if(s.Controller.LastPageUrl!==null&&s.Controller.LastPageUrl!==undefined&&s.Controller.LastPageUrl!=="")s.Controller.LoadData(t.EControlPage.Last)}]];const c=[];c.push(["filter",r.ResourceBag.Icons8Filter32Png,e=>{}]);const h=[n,l,a,A];const d=s.Platform.Toolbar.CreateButtonsAndMenus(h,"WorklistLanguage","navigationButtons.1","workstation");s.Platform.Toolbar.Groups.push(d);d.Create(s.Platform.Toolbar.Element);const u=[];u.push(c);const g=u;const f=s.Platform.Toolbar.CreateButtonsAndMenus(g,"WorklistLanguage","common.1","workstation");s.Platform.Toolbar.Groups.push(f);f.Create(s.Platform.Toolbar.Element);const C=s.Platform.CurrentSpec.Functions[0].Views[o].Actions;s.DefaultAction=WorklistToolbarController.determineDefaultAction(C);s.Platform.Toolbar.CreateTopViewButtons(s);s.Platform.Toolbar.CreateButtonGroupFromSpecView(C,s.Platform,t.ResourceBag)}static determineDefaultAction(e){for(let t=0;t<e.length;t++){if(e[t].IsDefault)return e[t]}return null}}t.WorklistToolbarController=WorklistToolbarController})(r=t.WorklistView||(t.WorklistView={}))})(t=e.ClientViews||(e.ClientViews={}))})(Efferent||(Efferent={}));var Efferent;(function(Efferent){var ClientViews;(function(ClientViews){var WorklistView;(function(WorklistView_1){var WebClient=Efferent.Frontend.WebClient;var FilterView=Efferent.ClientViews.FilterView;var CommonView=Efferent.ClientViews.CommonView;var DOMUtils=Efferent.Frontend.WebClient.DOMUtils;var FhirClient=Efferent.Frontend.FhirClient;var SettingsClient=Efferent.Frontend.SettingsClient;let EControlPage;(function(e){e[e["First"]=0]="First";e[e["Prev"]=1]="Prev";e[e["Next"]=2]="Next";e[e["Last"]=3]="Last";e[e["Refresh"]=4]="Refresh"})(EControlPage=WorklistView_1.EControlPage||(WorklistView_1.EControlPage={}));class HeaderItem{}class WorklistView{constructor(e,t,r,s,o){this.subResourceTypes=[];this.processedSubTypes=0;this.ViewName="studyWorklist";this.FilterProperties=[];this.Platform=t;this.PageSize=40;this.CurrentPage=0;this.Parent=e;this.createUserPane=DOMUtils.div({});this.Parent.appendChild(this.createUserPane);this.SpecView=r;this.ResourceBag=WorklistView_1.ResourceBag;this.Plugins=new Array;try{if(o&&o[0])this.LastResourceId=o[0]["lastResourceId"]}catch(e){WebClient.Utils.DebugConsoleLog(e)}this.Platform.LanguageManager.AddDictionary("{Efferent.ClientViews.WorklistView.ResourceBag.WorklistLanguageJson}","WorklistLanguage",Efferent.ClientViews.WorklistView.ResourceBag.WorklistLanguageJson[this.Platform.LanguageManager.CurrentLanguage]);this.getFilterProperties((()=>{this.Initialize1()}))}Initialize1(){const continueLoad=()=>{const dataBack=this.Platform.DataBackForViewChange!==undefined?this.Platform.DataBackForViewChange[this.SpecView.Id]:undefined;if(dataBack!==undefined&&dataBack.SpecView.Id===this.SpecView.Id)this.CurrentPage=dataBack.CurrentPage;const headerTable=[];const headerDataTable=this.Platform.CurrentSpec.GridTemplates[this.SpecView.TemplateId].Columns;headerDataTable.forEach((e=>{const t=new HeaderItem;t.Label=e.Label;t.TooltipExpr=e.TooltipExpression;t.TooltipText=e.TooltipText;t.LookupTable=e.LookupTable;if(e.ExpressionFallback&&e.ExpressionFallback.length>0)t.Expression=e.Expression+"|"+e.ExpressionFallback.join("|");else t.Expression=e.Expression;headerTable.push(t)}));this.HeaderStructure=headerTable;const filterView=new FilterView.FilterView(this.Platform.GetMainContainer(),this.Platform);const filterPane=new FilterView.FilterPane(filterView.BodySection,this,this.SpecView.SearchParameters);this.WorklistPane=new WorklistView_1.WorklistPane(this.Parent,this);this.FilterController=new CommonView.FilterController(this,filterPane,filterView,this.SpecView.Id);this.Platform.ResizeListeners.push(new WebClient.ResizeStructure(this.Platform.Toolbar.Topbar.constructor.name.toLowerCase(),this.Platform.Toolbar.Topbar,this.ViewName));this.Platform.ResizeListeners.push(new WebClient.ResizeStructure(this.WorklistPane.constructor.name.toLowerCase(),this.WorklistPane,this.ViewName));WorklistView_1.WorklistToolbarController.Register(this,this.SpecView.Id);this.Controller=new WorklistView_1.WorklistController(this.Platform,this,filterPane);this.FilterController.RebuildFilterMenu();this.Platform.Toolbar.DeselectAllButtons();let viewName=this.ViewName;let viewInstance=this.SpecView.Id;let keyName=`defaultPreferred${viewInstance}`;let getDefault=SettingsClient.SettingsController.GetSetting(keyName,undefined,viewName,viewInstance);let condition=getDefault&&getDefault.value!=="null"&&getDefault.value!==null;if(condition){let e=filterPane.BuildSearchParams(getDefault.value);if(e){filterPane.ApplyFilter(e,getDefault.value)}else{this.Controller.LoadData()}}else{let e=null;if(e&&WebClient.HttpUtils.GetUrlParameter("URN")==="")filterPane.SetQuickDataHoling();else this.Controller.LoadData()}sessionStorage["pageView"]="worklist";sessionStorage.removeItem("studyView");sessionStorage["viewWorklistOnUrl"]=WebClient.HttpUtils.GetUrlParameter("view");sessionStorage["urlWorklistOnUrl"]=WebClient.HttpUtils.GetUrlParameter("URN");if(this.Platform.PluginsArray.length!==0){this.Platform.PluginsArray.forEach((pl=>{try{const viewerPlugin=eval(pl);const viewerPlug=new viewerPlugin;this.Platform.ResizeListeners.push(new WebClient.ResizeStructure(viewerPlug.constructor.name.toLowerCase(),viewerPlug,this.ViewName));this.Plugins.push(viewerPlug)}catch(e){WebClient.Utils.DebugConsoleLog(e)}}));this.Plugins[0].Initialize(this.Controller,this.Plugins,0,this.LoadPostAction,undefined,false)}this.Platform.SwitchTheme(this)};this.Platform.InjectPlugins(this.SpecView,continueLoad)}LoadPostAction(){this.Platform.RebuildToolbar()}CreateExtraTag(e,t,r){r.push(e);const s=DOMUtils.div({});const o=DOMUtils.span({});o.innerHTML=e;s.appendChild(o);DOMUtils.AddClass(s,"toolbarMenuItem enabledButton activeTag tagButton extraButton");t.appendChild(s);s.addEventListener("click",(()=>{const t=this.Platform;CommonView.TagController.AddTagToResource(t.CurrentView,e,this.WorklistPane.SelectedEntities,(e=>{try{this.Controller.UpdateRow(e)}catch(e){}}));WebClient.Toolbar.HideAllMenus();t.Toolbar.DeselectAllButtons()}))}Refresh(){this.Controller.LoadData(EControlPage.Refresh)}UpdateUI(){}ShowPanes(e){if(e){this.FilterController.FilterView.Element.style.display="none";document.querySelector(".mainPage > .panel").classList.remove("hide")}}LoadData(e,t){this.Controller.LoadData(e,t)}LoadResourceList(){this.WorklistPane.BuildTableBody(this.Records);const e=this.CurrentPage;const t=this.Records.length;this.WorklistPane.UpdatePaginationBar(this.WorklistSize,this.PageSize,e,t)}OpenActionsConfig(){}CloseActionsConfig(){}OnFullScreenChange(e){}Dispose(){let e=new Array;this.Platform.ResizeListeners.forEach((t=>{if(t.GroupName!==this.ViewName)e.push(t)}));this.Platform.ResizeListeners=e}OnPopState(e){}OnBeforeUnload(e){if(sessionStorage["CacheReload"]===undefined||WebClient.Utils.StrToBool(sessionStorage["CacheReload"])===false)return"Are you sure to exit?";return}SwitchTheme(){this.Platform.SwitchTheme(this)}OnUnload(e){return}GetFhirEntities(){return this.WorklistPane.SelectedEntities||[]}OnTagChanged(e){this.Controller.UpdateRow(e)}GetLanguageDictionary(){return"WorklistLanguage"}SetInitialStatus(){}getFilterProperties(e,t){const r=this.Platform.CurrentSpec.GridTemplates[this.SpecView.TemplateId].ResourceType;const s=JSON.parse(JSON.stringify(this.Platform.CurrentSpec.GridTemplates[this.SpecView.TemplateId].Columns));if(t==="Resource"&&this.SpecView.URN.indexOf("/fhir/")>-1){s.push({Expression:"meta.tag",Label:"Tag"})}const o=t?t:r;FhirClient.ValueHelper.GetStructureDefinition(o,(()=>{FhirClient.ValueHelper.GetSearchParameters(o,(()=>{const n=FhirClient.ValueHelper.SearchParameters[o];if(FhirClient.ValueHelper.StructureDefinitions[r]&&FhirClient.ValueHelper.StructureDefinitions[o]&&n){const l=FhirClient.ValueHelper.StructureDefinitions[r]["snapshot"]["element"];const a=FhirClient.ValueHelper.StructureDefinitions[o]["snapshot"]["element"];n["entry"].forEach((e=>{const n=e.resource;const A=n["expression"].split(" | ");let c="";let h=false;A.every((e=>{if(e.split(".")[0]===o)c=e.replace("-","");if(c){s.forEach((e=>{if(!e.hasOwnProperty("CanFilter")||e["CanFilter"]===true){let s=e["Expression"].replace(/\[0\]/g,"");const A=/\.where\((.*?)\)/;let d=WebClient.Utils.ResolveVariables(null,s);const u=A.exec(d);if(u)d=d.replace(u[0],"");let g=d.split(".");for(let s=0;s<g.length;s++){const A=r+"."+g.slice(0,g.length-s).join(".");l.forEach((s=>{if(A===s["path"]){if(s["type"]){const l=this.getFieldResourceTypes(s["type"][0]["targetProfile"]);l.forEach((e=>{if(this.subResourceTypes.indexOf(e)===-1)this.subResourceTypes.push(e)}));if(l.indexOf(o)>-1)g[0]=o;let A=(t?t==="Resource"?"Resource.":"":r+".")+g.join(".");if(A.indexOf(c)>-1){const r=n["code"].replace(/[_-]/g,"");const l=t==="Resource"?c.replace("Resource.","").split("."):c.split(".");let A=true;if(l.length>1&&r.toLowerCase()!==l[1].toLowerCase())A=false;let d="";for(let e=0;e<a.length;e++){if(c.toLowerCase()===a[e]["path"].toLowerCase()){d=a[e]["type"][0]["code"];break}}if(A&&(!t&&s["type"][0]["code"]!=="Reference"||t)){const r=t?(t==="Resource"?"":s["path"].split(".")[1]+":")+o+"."+n["code"]:n["code"];if(!this.FilterProperties[e["Label"]])this.FilterProperties[e["Label"]]=[];const l={name:n["code"],FilterQuery:r,FieldType:d,Data:n["type"],ColumnExpression:e["Expression"],ResourceType:o};this.FilterProperties[e["Label"]].push(l);h=true}}}}}));if(h)break}}}))}return!h}))}));if(o===r){if(this.subResourceTypes.length>0){this.subResourceTypes.push("Resource");this.subResourceTypes.forEach((t=>{this.getFilterProperties(e,t)}))}else{e()}}else{this.processedSubTypes++;if(this.processedSubTypes>=this.subResourceTypes.length)e()}}else{this.processedSubTypes++;if(this.processedSubTypes>=this.subResourceTypes.length)e()}}))}))}getFieldResourceTypes(e){let t=[];if(e){for(let r=0;r<e.length;r++){const s=e[r].split("/");const o=s[s.length-1];t.push(o)}}return t}}WorklistView_1.WorklistView=WorklistView})(WorklistView=ClientViews.WorklistView||(ClientViews.WorklistView={}))})(ClientViews=Efferent.ClientViews||(Efferent.ClientViews={}))})(Efferent||(Efferent={}));