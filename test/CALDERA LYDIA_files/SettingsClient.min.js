var Efferent;(function(e){var t;(function(t){var n;(function(n){var l=e.Frontend.WebClient.HttpUtils;class SettingsController{static GetSettings(e){SettingsController.GetLevels((e=>{if(e.error)t.WebClient.Toaster.ShowToast("The settings levels could not be loaded.",t.WebClient.Colors.BelizeHole,3)}));var n=SettingsController.BaseUrl+"/settings/values";let i={Accept:"application/json"};l.AjaxCall(n,"GET",i,undefined,((t,n)=>{try{if(n==="")n='[{"setting":"theme","value":"Dark"},{"setting":"lang","value":"en"}]';SettingsController.Settings=JSON.parse(n);e({error:false})}catch(t){e({error:true})}}),(t=>{e({error:true})}))}static GetLevels(e){var t=SettingsController.BaseUrl+"/settings/levels";l.AjaxCall(t,"GET",{},null,((t,n)=>{if(n!=="")SettingsController.Levels=JSON.parse(n);e({error:false})}),(t=>{e({error:true})}))}static GetSetting(e,t,n,l){var i=SettingsController.Settings;try{if(i!==null&&i!==undefined){var r;var s=i.filter((t=>t.setting===e));if(s){if(n||l){s.forEach((e=>{var t;let i=(t=e.component)===null||t===void 0?void 0:t.split("|");if(i){if(n===i[4]&&l===i[5])r=e}}))}else{r=s.pop()}}let o=r===null||r===void 0?void 0:r.component;let a;if(o){let e=o.split("|");a={System:e[0],Application:e[1],Organization:e[2],User:e[3],ViewName:e[4],ViewInstance:e[5]}}if(r===undefined){return t}else{if(a)r.componentParse=a;return r||t}}else{return t}}catch(e){return t}}static SetSettings(e,n,i=false,r,s,o,a){var g;var S;if(e!==undefined&&e!==null&&e.length>0){if(SettingsController.Settings.length>0){SettingsController.Settings.forEach(((t,n)=>{e.forEach((e=>{if(t.setting===e.key){SettingsController.Settings[n].value=e.value}}))}))}e.forEach((e=>{let t=SettingsController.Settings.some((t=>t.setting===e.key));if(!t){g=SettingsController.Levels.filter((t=>t.id===e.levelId)).pop();S=r!==undefined?r:sessionStorage["application"];let t="system|"+S+"|"+sessionStorage["organizationName"]+(!i?"|"+(s?`*`:sessionStorage["userEmail"])+(o?"|"+o:"")+(a?"|"+a:""):"");SettingsController.Settings.push({component:t,level:e.levelId,setting:e.key,value:e.value})}}));try{var f="";e.forEach((e=>{g=SettingsController.Levels.filter((t=>t.id===e.levelId)).pop();S=r!==undefined?r:sessionStorage["application"];f+=g.id.toString()+"ʴADMINʴsystem|"+S+"|"+sessionStorage["organizationName"]+(!i?"|"+(s?`*`:sessionStorage["userEmail"])+(o?"|"+o:"")+(a?"|"+a:""):"")+"ʴ"+e.key+"ʴ"+e.value+"¬"}));f=f.substr(0,f.length-1);l.AjaxCall(SettingsController.BaseUrl+"/settings/values","POST",{},f,((e,t)=>{if(n!==undefined)n(e)}),((e,t)=>{if(n!==undefined)n(t)}))}catch(e){t.WebClient.Utils.DebugConsoleLog("Error on SetSettings => "+e);t.WebClient.Utils.DebugConsoleLog(e)}}}static SetSetting(e,n,i,r,s=false,o,a,g,S){let f=SettingsController.Levels.filter((t=>t.id===e)).pop()||{id:40,name:"User"};let u=o!==undefined?o:sessionStorage["application"];let v="system|"+u+"|"+sessionStorage["organizationName"]+(!s?"|"+(a?`*`:sessionStorage["userEmail"])+(g?"|"+g:"")+(S?"|"+S:""):"");if(SettingsController.Settings.length>0){var C=false;SettingsController.Settings.forEach(((e,t)=>{var l;let r=(l=e.component)===null||l===void 0?void 0:l.split("|");if(e.setting===n&&g===r[4]&&S===r[5]){SettingsController.Settings[t].value=i;C=true}}));if(!C)SettingsController.Settings.push({component:v,level:e,setting:n,value:i})}else{SettingsController.Settings.push({component:v,level:e,setting:n,value:i})}try{var d=f.id.toString()+"ʴADMINʴ"+v+"ʴ"+n+"ʴ"+i;l.AjaxCall(SettingsController.BaseUrl+"/settings/values","POST",{},d,((e,t)=>{if(r!==undefined)r(e)}),((e,t)=>{if(r!==undefined)r(t)}))}catch(e){t.WebClient.Utils.DebugConsoleLog("Error on SetSetting => "+e)}}}SettingsController.Settings=new Array;SettingsController.Levels=new Array;SettingsController.SETTING_VALUES={SYSTEM:10,APPLICATION:20,ORGANIZATION:30,USER:40,VIEW:50,VIEW_INSTANCE:60};n.SettingsController=SettingsController})(n=t.SettingsClient||(t.SettingsClient={}))})(t=e.Frontend||(e.Frontend={}))})(Efferent||(Efferent={}));